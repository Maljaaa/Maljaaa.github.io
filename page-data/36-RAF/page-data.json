{"componentChunkName":"component---src-templates-post-template-index-tsx","path":"/36-RAF/","result":{"data":{"cur":{"id":"41571ff0-c3d0-5c13-a4fe-7ddb927688a2","html":"<p><code class=\"language-text\">setTimeout</code>과 <code class=\"language-text\">setInterval</code>이 정확한 타이머 주기를 보장하지 않는다는 사실, 알고 계신가?<br>\n<code class=\"language-text\">setTimeout</code>과 <code class=\"language-text\">setInterval</code>이 불필요한 리소스를 소비할 가능성이 있다는 사실, 알고 계신가?<br>\n<code class=\"language-text\">setTimeout</code>과 <code class=\"language-text\">setInterval</code>이 비동기적으로 작업을 비동기적으로 예약한다는 사실, 알고 계신가?</p>\n<p> </p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 266px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 91.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAASABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMEAv/EABcBAAMBAAAAAAAAAAAAAAAAAAABAwL/2gAMAwEAAhADEAAAAb16zypVc1iiaNwF/8QAHBAAAQUAAwAAAAAAAAAAAAAAAQACAxESITEy/9oACAEBAAEFAtBO4FlU1Cdm7Cl8xgU3r//EABYRAAMAAAAAAAAAAAAAAAAAAAAQIf/aAAgBAwEBPwEj/8QAFxEAAwEAAAAAAAAAAAAAAAAAABARIf/aAAgBAgEBPwGGv//EABkQAAIDAQAAAAAAAAAAAAAAABARAAExMv/aAAgBAQAGPwKo0Hc6OD//xAAcEAABBQADAAAAAAAAAAAAAAABABARITFBgZH/2gAIAQEAAT8hE9IBxDQTtRBnWKkMggUSMa4R4z//2gAMAwEAAgADAAAAEP8ALzz/xAAXEQADAQAAAAAAAAAAAAAAAAAAAREQ/9oACAEDAQE/EKiBZ//EABYRAQEBAAAAAAAAAAAAAAAAAAEQIf/aAAgBAgEBPxAbsE//xAAaEAEAAgMBAAAAAAAAAAAAAAABADERIVFB/9oACAEBAAE/EMAVoltmzAHCGKgNOI6bFzBstABAi7VLzyYvnxKp/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"0\"\n        title=\"0\"\n        src=\"/static/70d7881117a7949676131dd5f7d790c0/f569a/0.jpg\"\n        srcset=\"/static/70d7881117a7949676131dd5f7d790c0/4ec73/0.jpg 180w,\n/static/70d7881117a7949676131dd5f7d790c0/f569a/0.jpg 266w\"\n        sizes=\"(max-width: 266px) 100vw, 266px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p> </p>\n<h2 id=\"requestanimationframe이란\" style=\"position:relative;\"><a href=\"#requestanimationframe%EC%9D%B4%EB%9E%80\" aria-label=\"requestanimationframe이란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>requestAnimationFrame이란?</h2>\n<p><code class=\"language-text\">requestAnimationFrame</code>은 브라우저에서 제공하는 메서드로, 애니메이션과 그 외의 반복 작업을 수행하기 위해 사용된다. 이 메서드는 브라우저의 리페인트 주기에 맞게 콜백 함수를 실행하도록 예약한다. 콜백 함수는 화면이 갱신되기 전에 실행되므로, 부드럽고 성능이 좋은 애니메이션 효과를 구현할 수 있다.</p>\n<p> </p>\n<h2 id=\"requestanimationframe을-사용해보자\" style=\"position:relative;\"><a href=\"#requestanimationframe%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%B4%EB%B3%B4%EC%9E%90\" aria-label=\"requestanimationframe을 사용해보자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>requestAnimationFrame을 사용해보자!</h2>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">animate</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">timestamp</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 애니메이션 로직</span>\n  \n  <span class=\"token comment\">// 다음 프레임 요청</span>\n  <span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span>animate<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 첫 번째 프레임 요청</span>\n<span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span>animate<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ol>\n<li><code class=\"language-text\">requestAnimationFrame</code>을 호출할 때, 실행하고자 하는 콜백 함수를 전달한다. 이 콜백 함수는 브라우저에서 리페인트 주기에 따라 호출된다.</li>\n<li>콜백 함수는 브라우저에 의해 전달되는 단일 인수로 실행된다. 이 인수는 <code class=\"language-text\">DOMHighResTimeStamp</code> 형식으로 제공되며, 애니메이션 시작 이후 경과한 시간을 나타낸다. 이 값을 활용하여 애니메이션을 제어할 수 있다.</li>\n<li>콜백 함수 내에서 원하는 애니메이션 또는 작업을 구현한다. 주로 <code class=\"language-text\">requestAnimationFrame</code>을 다시 호출하여 다음 리페인트 주기에 대한 콜백을 예약한다.</li>\n<li>애니메이션이 더 이상 필요하지 않을 때, 콜백 함수 내에서 <code class=\"language-text\">requestAnimationFrame</code>을 호출하는 대신 애니메이션을 중지시킬 수 있다.</li>\n</ol>\n<p> </p>\n<h2 id=\"akaraf가-settimeoutsetinterval보다-효율적인-이유\" style=\"position:relative;\"><a href=\"#akaraf%EA%B0%80-settimeoutsetinterval%EB%B3%B4%EB%8B%A4-%ED%9A%A8%EC%9C%A8%EC%A0%81%EC%9D%B8-%EC%9D%B4%EC%9C%A0\" aria-label=\"akaraf가 settimeoutsetinterval보다 효율적인 이유 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(a.k.a)RAF가 setTimeout/setInterval보다 효율적인 이유?</h2>\n<h3 id=\"1-최적화된-리페인트-주기\" style=\"position:relative;\"><a href=\"#1-%EC%B5%9C%EC%A0%81%ED%99%94%EB%90%9C-%EB%A6%AC%ED%8E%98%EC%9D%B8%ED%8A%B8-%EC%A3%BC%EA%B8%B0\" aria-label=\"1 최적화된 리페인트 주기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 최적화된 리페인트 주기</h3>\n<p><code class=\"language-text\">requestAnimationFrame</code>은 브라우저의 리페인트 주기에 맞게 콜백을 예약한다. 이는 브라우저가 화면을 갱신하는 주기와 동일하기 때문에 애니메이션을 매끄럽게 실행할 수 있다. 반면에 <code class=\"language-text\">setTimeout</code> 또는 <code class=\"language-text\">setInterval</code>은 정확한 타이머 주기를 보장하지 않기 때문에 애니메이션이 끊어지거나 부자연스러워질 수 있다.</p>\n<h3 id=\"2-배터리-및-성능-최적화\" style=\"position:relative;\"><a href=\"#2-%EB%B0%B0%ED%84%B0%EB%A6%AC-%EB%B0%8F-%EC%84%B1%EB%8A%A5-%EC%B5%9C%EC%A0%81%ED%99%94\" aria-label=\"2 배터리 및 성능 최적화 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 배터리 및 성능 최적화</h3>\n<p><code class=\"language-text\">requestAnimationFrame</code>은 브라우저의 최적화된 애니메이션 처리 방식을 활용하여, 사용자의 디바이스 성능과 배터리 수명을 고려한다. 이는 애니메이션이 디바이스에서 더 효율적으로 실행되게 하고, 배터리 소모를 최소화하여 사용자 경험을 향상시킨다. 반면에 <code class=\"language-text\">setTimeout</code> 또는 <code class=\"language-text\">setInterval</code>은 고정된 타이머 주기를 사용하므로 불필요한 작업과 배터리 소모가 발생할 수 있다.</p>\n<h3 id=\"3-백그라운드-탭의-처리-제한\" style=\"position:relative;\"><a href=\"#3-%EB%B0%B1%EA%B7%B8%EB%9D%BC%EC%9A%B4%EB%93%9C-%ED%83%AD%EC%9D%98-%EC%B2%98%EB%A6%AC-%EC%A0%9C%ED%95%9C\" aria-label=\"3 백그라운드 탭의 처리 제한 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 백그라운드 탭의 처리 제한</h3>\n<p>브라우저는 비활성 상태의 탭 또는 백그라운드에서 실행되는 탭의 처리를 제한할 수 있다. <code class=\"language-text\">requestAnimationFrame</code>은 브라우저가 애니메이션에 대한 처리를 조절할 수 있는 기능을 제공하여, 비활성 상태에서 불필요한 계산을 줄이고 성능을 최적화할 수 있다. 반면에 <code class=\"language-text\">setTimeout</code> 또는 <code class=\"language-text\">setInterval</code>은 주어진 시간 간격에 관계없이 계속해서 작업을 실행하므로 백그라운드에서 불필요한 리소스를 소비할 가능성이 있다.</p>\n<h3 id=\"4-동기화된-작업-처리\" style=\"position:relative;\"><a href=\"#4-%EB%8F%99%EA%B8%B0%ED%99%94%EB%90%9C-%EC%9E%91%EC%97%85-%EC%B2%98%EB%A6%AC\" aria-label=\"4 동기화된 작업 처리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. 동기화된 작업 처리</h3>\n<p><code class=\"language-text\">requestAnimationFrame</code>은 다른 브라우저 작업과 동기화되어 실행된다. 즉, 애니메이션과 관련된 작업을 브라우저의 리페인트 주기에 맞추어 수행할 수 있다는 뜻이다. 반면에 <code class=\"language-text\">setTimeout</code> 또는 <code class=\"language-text\">setInterval</code>은 시간 간격에 따라 비동기적으로 작업을 예약하므로 다른 브라우저 작업과의 동기화가 보장되지 않을 수 있다.</p>\n<p> </p>\n<h2 id=\"실제로-애니메이션을-구현해보자\" style=\"position:relative;\"><a href=\"#%EC%8B%A4%EC%A0%9C%EB%A1%9C-%EC%95%A0%EB%8B%88%EB%A9%94%EC%9D%B4%EC%85%98%EC%9D%84-%EA%B5%AC%ED%98%84%ED%95%B4%EB%B3%B4%EC%9E%90\" aria-label=\"실제로 애니메이션을 구현해보자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>실제로 애니메이션을 구현해보자!</h2>\n<h3 id=\"1-settimeout\" style=\"position:relative;\"><a href=\"#1-settimeout\" aria-label=\"1 settimeout permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. setTimeout</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">BoxSTO</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> boxRef <span class=\"token operator\">=</span> <span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> startX <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> distance <span class=\"token operator\">=</span> <span class=\"token number\">300</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> startTime <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> animateWithSTO <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">moveBox</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>startTime<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        startTime <span class=\"token operator\">=</span> Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">const</span> elapsed <span class=\"token operator\">=</span> Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> startTime<span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">const</span> newX <span class=\"token operator\">=</span> startX <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span>elapsed <span class=\"token operator\">/</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> distance<span class=\"token punctuation\">;</span>\n      boxRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>transform <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">translateX(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>newX<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px)</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>newX <span class=\"token operator\">&lt;</span> startX <span class=\"token operator\">+</span> distance<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>moveBox<span class=\"token punctuation\">,</span> <span class=\"token number\">16</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 16ms 간격으로 호출 (약 60fps)</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// 애니메이션 완료 후 다시 애니메이션 시작</span>\n        startTime <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>moveBox<span class=\"token punctuation\">,</span> <span class=\"token number\">16</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">moveBox</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">animateWithSTO</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>animateWithSTO<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>boxRef<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>box<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"2-requestanimationframe\" style=\"position:relative;\"><a href=\"#2-requestanimationframe\" aria-label=\"2 requestanimationframe permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. requestAnimationFrame</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">BoxRAF</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> boxRef <span class=\"token operator\">=</span> <span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> startX <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> distance <span class=\"token operator\">=</span> <span class=\"token number\">300</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> startTime <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> animateWithRAF <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">timestamp</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>startTime<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      startTime <span class=\"token operator\">=</span> timestamp<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">const</span> elapsed <span class=\"token operator\">=</span> timestamp <span class=\"token operator\">-</span> startTime<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> newX <span class=\"token operator\">=</span> startX <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span>elapsed <span class=\"token operator\">/</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> distance<span class=\"token punctuation\">;</span>\n    boxRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>transform <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">translateX(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>newX<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px)</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>newX <span class=\"token operator\">&lt;</span> startX <span class=\"token operator\">+</span> distance<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span>animateWithRAF<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 애니메이션 완료 후 다시 애니메이션 시작</span>\n      startTime <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n      <span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span>animateWithRAF<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span>animateWithRAF<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>animateWithRAF<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>boxRef<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>box<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>위 두 예시를 실제로 동작시켜보면, 눈으로도 그 차이를 느낄 수 있다.<br>\n(위가 <code class=\"language-text\">setTimeout</code>, 아래가 <code class=\"language-text\">requestAnimationFrame</code>)</p>\n<p><img src=\"/cbba49538a9ed10ee79f8f16e227a82c/1.gif\" alt=\"\"></p>\n<p> </p>\n<blockquote>\n<p>gif라 큰 차이가 느껴지지 않는데, 실제로 브라우저에서 확인해보면 차이가 크게 난다..! 🥲</p>\n</blockquote>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 420px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 64.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQBAgX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAABxpGpaDgf/8QAGBAAAwEBAAAAAAAAAAAAAAAAAQIhACL/2gAIAQEAAQUCFZh0EGWtMon/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAZEAADAAMAAAAAAAAAAAAAAAAAECEBETH/2gAIAQEABj8CprCpyr//xAAZEAEBAQEBAQAAAAAAAAAAAAABEQAhMUH/2gAIAQEAAT8hcHZvEXVukQUzXfp7cW//2gAMAwEAAgADAAAAECDv/8QAFhEBAQEAAAAAAAAAAAAAAAAAAGER/9oACAEDAQE/EI2P/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAERYf/aAAgBAgEBPxBuMmn/xAAdEAEAAwACAwEAAAAAAAAAAAABABEhQVExYXGh/9oACAEBAAE/EC1N9mMAiooh9I7b5eMeoWUl4NfszCgBdK8RZa119s//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2\"\n        title=\"2\"\n        src=\"/static/2c31ad8279bf410139edcff30bbdbffa/65f94/2.jpg\"\n        srcset=\"/static/2c31ad8279bf410139edcff30bbdbffa/4ec73/2.jpg 180w,\n/static/2c31ad8279bf410139edcff30bbdbffa/158ba/2.jpg 360w,\n/static/2c31ad8279bf410139edcff30bbdbffa/65f94/2.jpg 420w\"\n        sizes=\"(max-width: 420px) 100vw, 420px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p> </p>\n<h2 id=\"조금-더-자세히-알아보자면\" style=\"position:relative;\"><a href=\"#%EC%A1%B0%EA%B8%88-%EB%8D%94-%EC%9E%90%EC%84%B8%ED%9E%88-%EC%95%8C%EC%95%84%EB%B3%B4%EC%9E%90%EB%A9%B4\" aria-label=\"조금 더 자세히 알아보자면 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>조금 더 자세히 알아보자면..</h2>\n<h3 id=\"1-cancelanimationframe\" style=\"position:relative;\"><a href=\"#1-cancelanimationframe\" aria-label=\"1 cancelanimationframe permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. cancelAnimationFrame</h3>\n<p>requestAnimationFrame은 요청 ID를 반환하는데, 이 ID와 cancelAnimationFrame을 사용하여 애니메이션을 중지할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> requestId <span class=\"token operator\">=</span> <span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span>animateWithRAF<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">cancelAnimationFrame</span><span class=\"token punctuation\">(</span>requestId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>animateWithRAF<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p> </p>\n<h3 id=\"2-domhighrestimestamp\" style=\"position:relative;\"><a href=\"#2-domhighrestimestamp\" aria-label=\"2 domhighrestimestamp permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. DOMHighResTimeStamp</h3>\n<p>애니메이션의 부드러운 동작을 위해 각 프레임에서 변화되는 속성을 애니메이션 이전의 상태에서 애니메이션 이후의 상태로 부드럽게 변화시키는 보간(interpolation)을 적용하는 것이 일반적인데, 이를 위해 <code class=\"language-text\">DOMHighResTimeStamp</code> 값을 이용하여 애니메이션 진행 상태를 계산하고 속성을 업데이트할 수 있다.</p>\n<blockquote>\n<p><strong>보간법이란?</strong><br>\n주어진 값들 사이에서 새로운 값을 추정 또는 계산하는 기술이다. 애니메이션에서는 보간법을 사용하여 애니메이션 진행 상태에 따라 중간 값을 계산하여 부드러운 움직임을 만들어낸다. 일반적으로 선형 보간법(Linear Interpolation)이 가장 많이 사용되며, 시작 값과 끝 값 사이에서 일정한 비율에 따라 중간 값들을 계산한다. 이러한 보간법을 사용하면 애니메이션에 부드러운 전환 효과를 부여할 수 있다.</p>\n</blockquote>\n<p><code class=\"language-text\">DOMHighResTimeStamp</code>는 <code class=\"language-text\">requestAnimationFrame</code>의 콜백 함수에 전달되는 인수(위의 timestamp)로, 현재 프레임이 시작된 시간을 나타내는 고해상도 타임스탬프다. 이 값을 사용하여 애니메이션의 진행 상태를 계산하고 애니메이션 속성을 업데이트할 수 있다.</p>\n<p> </p>\n<h3 id=\"3-속도-조절\" style=\"position:relative;\"><a href=\"#3-%EC%86%8D%EB%8F%84-%EC%A1%B0%EC%A0%88\" aria-label=\"3 속도 조절 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 속도 조절</h3>\n<p><code class=\"language-text\">requestAnimationFrame</code>은 브라우저의 리페인트 주기에 따라 호출된다. 만약 프레임 속도에 따라 애니메이션 속도를 조절하고 싶다면, 시간의 경과에 따라 애니메이션의 진행 상태를 조정하는 로직을 추가해야 할 수 있다.</p>\n<p>이전의 예시 코드에 로직을 추가해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">BoxRAF</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> boxRef <span class=\"token operator\">=</span> <span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> startX <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> distance <span class=\"token operator\">=</span> <span class=\"token number\">300</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> startTime <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> prevTimestamp <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> targetFPS <span class=\"token operator\">=</span> <span class=\"token number\">60</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 목표 프레임 속도 (예: 60fps)</span>\n  <span class=\"token keyword\">const</span> speedFactor <span class=\"token operator\">=</span> targetFPS <span class=\"token operator\">/</span> <span class=\"token number\">60</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 목표 프레임 속도 대비 속도 계수</span>\n\n  <span class=\"token keyword\">const</span> animateWithRAF <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">timestamp</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>startTime<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      startTime <span class=\"token operator\">=</span> timestamp<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>prevTimestamp<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      prevTimestamp <span class=\"token operator\">=</span> timestamp<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">const</span> elapsed <span class=\"token operator\">=</span> timestamp <span class=\"token operator\">-</span> startTime<span class=\"token punctuation\">;</span>\n    prevTimestamp <span class=\"token operator\">=</span> timestamp<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> newX <span class=\"token operator\">=</span> startX <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span>elapsed <span class=\"token operator\">/</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> distance <span class=\"token operator\">*</span> speedFactor<span class=\"token punctuation\">;</span>\n    boxRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>transform <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">translateX(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>newX<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px)</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>newX <span class=\"token operator\">&lt;</span> startX <span class=\"token operator\">+</span> distance<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span>animateWithRAF<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 애니메이션 완료 후 다시 애니메이션 시작</span>\n      startTime <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n      prevTimestamp <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n      <span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span>animateWithRAF<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> requestId <span class=\"token operator\">=</span> <span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span>animateWithRAF<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">cancelAnimationFrame</span><span class=\"token punctuation\">(</span>requestId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>animateWithRAF<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>boxRef<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>box<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p> </p>\n<h3 id=\"3-물론-단순-애니메이션-외에도\" style=\"position:relative;\"><a href=\"#3-%EB%AC%BC%EB%A1%A0-%EB%8B%A8%EC%88%9C-%EC%95%A0%EB%8B%88%EB%A9%94%EC%9D%B4%EC%85%98-%EC%99%B8%EC%97%90%EB%8F%84\" aria-label=\"3 물론 단순 애니메이션 외에도 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 물론, 단순 애니메이션 외에도…</h3>\n<p><code class=\"language-text\">requestAnimationFrame</code>은 애니메이션 외에도 브라우저의 리페인트 주기와 동기화된 작업(예를 들어, 사용자 인터페이스의 상태를 업데이트하거나 렌더링을 수행하는 작업)을 수행할 수 있는 메서드다.</p>\n<p>시계를 실시간으로 업데이트하는 예시를 들 수 있겠다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Clock</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>time<span class=\"token punctuation\">,</span> setTime<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> updateClock <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setTime</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span>updateClock<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> requestId <span class=\"token operator\">=</span> <span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span>updateClock<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">cancelAnimationFrame</span><span class=\"token punctuation\">(</span>requestId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>updateClock<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Current Time: </span><span class=\"token punctuation\">{</span>time<span class=\"token punctuation\">.</span><span class=\"token function\">toLocaleTimeString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#requestanimationframe%EC%9D%B4%EB%9E%80\">requestAnimationFrame이란?</a></p>\n</li>\n<li>\n<p><a href=\"#requestanimationframe%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%B4%EB%B3%B4%EC%9E%90\">requestAnimationFrame을 사용해보자!</a></p>\n</li>\n<li>\n<p><a href=\"#akaraf%EA%B0%80-settimeoutsetinterval%EB%B3%B4%EB%8B%A4-%ED%9A%A8%EC%9C%A8%EC%A0%81%EC%9D%B8-%EC%9D%B4%EC%9C%A0\">(a.k.a)RAF가 setTimeout/setInterval보다 효율적인 이유?</a></p>\n<ul>\n<li><a href=\"#1-%EC%B5%9C%EC%A0%81%ED%99%94%EB%90%9C-%EB%A6%AC%ED%8E%98%EC%9D%B8%ED%8A%B8-%EC%A3%BC%EA%B8%B0\">1. 최적화된 리페인트 주기</a></li>\n<li><a href=\"#2-%EB%B0%B0%ED%84%B0%EB%A6%AC-%EB%B0%8F-%EC%84%B1%EB%8A%A5-%EC%B5%9C%EC%A0%81%ED%99%94\">2. 배터리 및 성능 최적화</a></li>\n<li><a href=\"#3-%EB%B0%B1%EA%B7%B8%EB%9D%BC%EC%9A%B4%EB%93%9C-%ED%83%AD%EC%9D%98-%EC%B2%98%EB%A6%AC-%EC%A0%9C%ED%95%9C\">3. 백그라운드 탭의 처리 제한</a></li>\n<li><a href=\"#4-%EB%8F%99%EA%B8%B0%ED%99%94%EB%90%9C-%EC%9E%91%EC%97%85-%EC%B2%98%EB%A6%AC\">4. 동기화된 작업 처리</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%8B%A4%EC%A0%9C%EB%A1%9C-%EC%95%A0%EB%8B%88%EB%A9%94%EC%9D%B4%EC%85%98%EC%9D%84-%EA%B5%AC%ED%98%84%ED%95%B4%EB%B3%B4%EC%9E%90\">실제로 애니메이션을 구현해보자!</a></p>\n<ul>\n<li><a href=\"#1-settimeout\">1. setTimeout</a></li>\n<li><a href=\"#2-requestanimationframe\">2. requestAnimationFrame</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%A1%B0%EA%B8%88-%EB%8D%94-%EC%9E%90%EC%84%B8%ED%9E%88-%EC%95%8C%EC%95%84%EB%B3%B4%EC%9E%90%EB%A9%B4\">조금 더 자세히 알아보자면..</a></p>\n<ul>\n<li><a href=\"#1-cancelanimationframe\">1. cancelAnimationFrame</a></li>\n<li><a href=\"#2-domhighrestimestamp\">2. DOMHighResTimeStamp</a></li>\n<li><a href=\"#3-%EC%86%8D%EB%8F%84-%EC%A1%B0%EC%A0%88\">3. 속도 조절</a></li>\n<li><a href=\"#3-%EB%AC%BC%EB%A1%A0-%EB%8B%A8%EC%88%9C-%EC%95%A0%EB%8B%88%EB%A9%94%EC%9D%B4%EC%85%98-%EC%99%B8%EC%97%90%EB%8F%84\">3. 물론, 단순 애니메이션 외에도…</a></li>\n</ul>\n</li>\n</ul>\n</div>","excerpt":"과 이 정확한 타이머 주기를 보장하지 않는다는 사실, 알고 계신가? 과 이 불필요한 리소스를 소비할 가능성이 있다는 사실, 알고 계신가? 과 이 비동기적으로 작업을 비동기적으로 예약한다는 사실, 알고 계신가?      requestAnimationFrame이란? 은 브라우저에서 제공하는 메서드로, 애니메이션과 그 외의 반복 작업을 수행하기 위해 사용된다. 이 메서드는 브라우저의 리페인트 주기에 맞게 콜백 함수를 실행하도록 예약한다. 콜백 함수는 화면이 갱신되기 전에 실행되므로, 부드럽고 성능이 좋은 애니메이션 효과를 구현할 수 있다.   requestAnimationFrame을 사용해보자! 을 호출할 때, 실행하고자 하는 콜백 함수를 전달한다. 이 콜백 함수는 브라우저에서 리페인트 주기에 따라 호출된다. 콜백 함수는 브라우저에 의해 전달되는 단일 인수로 실행된다. 이 인수는  형식으로 제공되며, 애니메이션 시작 이후 경과한 시간을 나타낸다. 이 값을 활용하여 애니메이션을 제어할 수…","frontmatter":{"date":"2023.06.01","title":"애니메이션을 그린다고요? setTimeout 싫어요! requestAnimationFrame 좋아요!","categories":"Dev","emoji":"🎨"},"fields":{"slug":"/36-RAF/"}},"next":{"id":"e139c1f9-10b4-5993-97e8-29aa0fb06eea","html":"<blockquote>\n<p>개인적으로 보통은 styled-components나 emotion을 사용한 CSS-in-JS 기법을 많이 쓰는데, 이번 글에서는 생략하도록 하겠다.</p>\n</blockquote>\n<p> </p>\n<p>외부 CSS 프레임워크를 쓰는 우리 팀. 하지만 CSS 프레임워크 하나로 모든 게 뚝딱 완성될 리는 없었다. 어쨌거나 CSS 커스터마이징이 필요했는데…</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 420px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 86.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAEj0lEQVQ4y02Ua2yTVRjHT/d2ERXREMItQZF1HV1pu7Zvb+vbt6WXtetlvayjl10kowzGYGWDsXVssAFj632AqBkJRhPCV2NMJPGLMcYRiYnGmOAH9bMGwUCIStvzN283iCc5eZKTk9/z/z/Pcw4h/1u6qISxpuRE4X5THzqnf5wsWRDLmWsHlsyIZc3wjKl/65rRPUmWePRdsSKe5+A6obp+7LaHhOcMjRu3bBDVQQ3iBrJV8rponftaIMP+kihYEJjWPes6q4N/kqWecU3Fe1oDz7gakQvGSnBGX+m+aIJ3QvP3Hv22Vn2PhPgzrIg0MGscIYNvUkv4wdYzsRyHWI77V4ihc0baeVoN/1kNnCcUtfbevTX/JIvIvBEd6baa+2QbHMOqx2rfntnSr4NrkvjBVsZ2WE7kjl0R/xT7SLCaLFpqoTkDbU81UfdxLSKjdgTGjOicVoI/vBfOUQXtvmQU1NY8GQUcaTm0oaYJwnZLGOeIkugPNO8PZFhEL5mQKFpqQn0CU3o6OjsI6e4mNBIxMmMT+PL7Ozgwb0VonKMq126617QTZ0pHqumVOPWcaquRp7hNABDvhPauoCye554JsESBo+HzRpq/MY9w0Au9WoW7q9/gr8ePMLE4guL7iwj6vOiPx+mPP/2A67cKMERbVgj3joywkSZndKH9uTIq7ETBQuMFc91iONOOQwsh9M/6YBuSIzDDIrbE0WTOSgcKLto1w1LzIclV4CNC+q9aSceo6mo8xyFe4CrPgXWVOQ59RR7xnBn+GTU8Z1T1kghjEzpvoO6xtmrXDAv7sGIV+HOtIcBXxD+p/XzdbuUFrGBBbJlHzzKPmDCPWQ69BR69RQuSOQ7JPIf4kpkm81w1vmQGP6I8OTBvXBvDQIZdXQdW1+2iO2tG/ykthsZZ9E3pEL1gRHeBQ7jIIVLiEC1baHSZR7jEVaNFDqFh5f1XCHl1Haj7NllcAyby9ctIp1T4xCHDh7wUK84WLHtlWAq2YjqpwEhKRY8cbaPDR9UYH1BUFnv2oeCS/qHZuvFtUrz3Buk8pVoR6hLP85VEnqOhyyakDqtwOalEJrEPl8NyvOdoQcrbjDm3FLcsUtzkmlG2SmrHu1pwxS7FiGJnusA1EbIjukp2aWWdvgkF+sosTZZtNLpggfe8EQHhpeQtiGY5xOdM8ExpEZ010FSvnI4Oq2uJaT34g7LvTmt2pQOq7Zuz6rcIYfRf3xRxDx5s2v8Z1R8M0K4pGY0ttKK3oEFvlkUyq0c8a0CibELwrA7RxXZEylb0XLNXQxfb0WzeYTwWbCHkU7NIuullEWGcFOIOoMEFiKz/0M2eO5D0LEKRSME46IdtxIGOcRvsJ+zoSGuE7tP+EltLLikRzOz7WenavYM8tRONbjtTb7HYSSuMs1YTOysQu0BFDlBiA0R2QEjW6HiIBusjbHPfQPSSDn1lAzUND1W2+L7ABvbjD5rHnhDJ0D3mxR/IOCkVCyqfR1cFja4qxK76GRgXwNgewj3pw8A1I0JzPF6y3afEATD87zWmaVIqbj5HGNm7DQLwP8joYgme9VO+AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"0\"\n        title=\"0\"\n        src=\"/static/f535f17872e79f3702e384dc21af80b6/d10fb/0.png\"\n        srcset=\"/static/f535f17872e79f3702e384dc21af80b6/e9ff0/0.png 180w,\n/static/f535f17872e79f3702e384dc21af80b6/f21e7/0.png 360w,\n/static/f535f17872e79f3702e384dc21af80b6/d10fb/0.png 420w\"\n        sizes=\"(max-width: 420px) 100vw, 420px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n🙋 “inline으로 커스텀할까요? 아니면 className을 추가할까요?”</p>\n<p> </p>\n<h2 id=\"inline-style을-지양하자\" style=\"position:relative;\"><a href=\"#inline-style%EC%9D%84-%EC%A7%80%EC%96%91%ED%95%98%EC%9E%90\" aria-label=\"inline style을 지양하자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Inline Style을 지양하자</h2>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token special-attr\"><span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value css language-css\"><span class=\"token property\">color</span><span class=\"token punctuation\">:</span> blue<span class=\"token punctuation\">;</span> <span class=\"token property\">font-size</span><span class=\"token punctuation\">:</span> 16px<span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span></span><span class=\"token punctuation\">></span></span>인라인 스타일<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>위와 같이, 인라인 스타일은 HTML 요소의 style 속성을 사용하여 직접 스타일을 적용하는 방법이다. 인라인 스타일을 사용하면 간단하고 빠르게 스타일을 적용할 수 있다. HTML 요소에 직접 스타일을 작성하므로 별도의 CSS 파일을 만들 필요도 없다.</p>\n<p>하지만 편리함이 있기에 단점도 있는 법. 인라인 스타일의 단점을 살펴보자.</p>\n<ol>\n<li><strong>코드의 재사용성이 떨어진다.</strong><br>\n인라인 스타일은 요소마다 개별적으로 작성되기 때문에 스타일을 재사용하기가 어렵다.</li>\n<li><strong>유지보수가 어렵다.</strong><br>\n스타일을 인라인으로 작성하면 HTML 코드가 복잡해지고 가독성이 떨어질 수 있다.</li>\n<li><strong>우선순위 관련 문제가 발생할 수 있다.</strong><br>\n인라인 스타일은 다른 스타일 규칙보다 우선시되므로, 스타일 우선순위와 관련된 문제가 발생할 수 있다.</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 282px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 136.1111111111111%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAbABQDASIAAhEBAxEB/8QAGQAAAwADAAAAAAAAAAAAAAAAAAQFAQID/8QAFwEBAAMAAAAAAAAAAAAAAAAAAgADBf/aAAwDAQACEAMQAAABszaKIdUwMRJriVWjsciL/8QAGxABAQADAAMAAAAAAAAAAAAAAQIAAwQQETH/2gAIAQEAAQUC2qQe4vNtATQoidFrOF1OdP3x/8QAGBEAAgMAAAAAAAAAAAAAAAAAARADITL/2gAIAQMBAT8BApQ5X//EABURAQEAAAAAAAAAAAAAAAAAAAEg/9oACAECAQE/AWP/xAAeEAABBAIDAQAAAAAAAAAAAAABAAIQESEiMVFhgf/aAAgBAQAGPwLHKBD3Hu4ytjqrBtH0xhxC+z//xAAdEAACAgIDAQAAAAAAAAAAAAABEQAhEEExUWGx/9oACAEBAAE/ITt0VOW3hCFSwjGtvqP4tohAOxOcBUB5GUnUCIR4Z9Wf/9oADAMBAAIAAwAAABC/BPL/xAAYEQEAAwEAAAAAAAAAAAAAAAABABEhEP/aAAgBAwEBPxC+1cBqIOpP/8QAGBEAAwEBAAAAAAAAAAAAAAAAAAEhEBH/2gAIAQIBAT8QazGzp//EAB8QAQEAAgIBBQAAAAAAAAAAAAERACExQaEQYXGR8f/aAAgBAQABPxBroARZXb9ZLT3iSd8+kKBHR0OcI3u7GXquGFHhKYvLTRpD+eceaey6xo4NjBcSkXiHnHjDv5z/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"1\"\n        title=\"1\"\n        src=\"/static/25f55a752c93f523e11ba72a6e63ca47/822fd/1.jpg\"\n        srcset=\"/static/25f55a752c93f523e11ba72a6e63ca47/4ec73/1.jpg 180w,\n/static/25f55a752c93f523e11ba72a6e63ca47/822fd/1.jpg 282w\"\n        sizes=\"(max-width: 282px) 100vw, 282px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n그렇다면 위의 단점들을 해결할 수 있는 방법이 바로…?</p>\n<p> </p>\n<h2 id=\"css-module\" style=\"position:relative;\"><a href=\"#css-module\" aria-label=\"css module permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CSS Module</h2>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token comment\">/* styles.css */</span>\n<span class=\"token selector\">.heading</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> blue<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">font-size</span><span class=\"token punctuation\">:</span> 16px<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> styles <span class=\"token keyword\">from</span> <span class=\"token string\">'./styles.css'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">MyComponent</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>heading<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">CSS 모듈</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위와 같이, CSS 모듈은 CSS 파일을 사용하여 스타일을 정의하고 HTML 요소에 적용하는 방법이다. 각 CSS 파일은 모듈화된 스타일을 정의하며, 해당 스타일은 클래스 이름을 통해 HTML 요소에 적용된다.</p>\n<ol>\n<li><strong>코드의 재사용성이 높아진다.</strong><br>\nCSS 모듈을 사용하면 스타일을 모듈화하여 재사용할 수 있다. 여러 요소에서 같은 스타일을 적용해야 할 때 모듈을 가져와 사용할 수 있으므로 코드의 중복을 줄일 수 있다.</li>\n<li><strong>유지보수가 용이합니다.</strong><br>\n스타일이 별도의 CSS 파일에 정의되므로 HTML 코드와 스타일이 분리되어 가독성이 향상된다. 스타일을 수정하거나 추가할 때도 CSS 파일에서 작업하므로 관리가 쉽다.</li>\n<li><strong>스타일 우선순위 관련 문제가 해결된다.</strong><br>\nCSS 모듈은 클래스 이름을 통해 스타일을 적용하므로 인라인 스타일과 달리 우선순위 문제가 발생하지 않는다. CSS 모듈에서 정의한 스타일은 해당 클래스를 사용하는 요소에만 적용되기 때문에 다른 요소에 영향을 주지 않는다.</li>\n</ol>\n<p>물론 불편한 점도 존재한다. 번들러 설정에서 CSS 모듈 기능을 활성화해야 하고, CSS 모듈은 컴파일 시에 클래스 이름을 해시값으로 변환하여 고유한 클래스 이름을 생성하기 때문에 동적으로 클래스 이름을 생성해야 하는 경우에는 추가적인 작업이 필요하다.</p>\n<p>추가 설정이 필요하고 동적인 스타일링에 제약이 있지만, 무엇보다 개발에 있어서 중요한 것은 <strong>유지보수</strong>와 <strong>재사용성</strong>이 아닐까싶다. <del>당장의 빠르고 편리한 인라인 스타일에 혹해서 스타일 우선순위가 꼬이는 바람에 리팩토링한 적이 한두번이 아니다😇</del>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 234px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 92.22222222222223%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAASABQDASIAAhEBAxEB/8QAGAABAQADAAAAAAAAAAAAAAAAAAUBAwT/xAAWAQEBAQAAAAAAAAAAAAAAAAABAAL/2gAMAwEAAhADEAAAAYFPNDLIUw6u0qcNH//EABsQAAIDAAMAAAAAAAAAAAAAAAECAAMTBBEz/9oACAEBAAEFAoKdUxiUKaQoQ4icPyaEnv8A/8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQMBAT8BIT//xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAgEBPwFjP//EABwQAAICAgMAAAAAAAAAAAAAAAABAjERIRBxof/aAAgBAQAGPwIji8GxO5Pw0i2Pviz/xAAdEAEAAgICAwAAAAAAAAAAAAABABEhMUGRUWHw/9oACAEBAAE/IZUqUyYAxcYQ9V7TUhdvmWKiC8s+/wBTSWmXc//aAAwDAQACAAMAAAAQnOf9/8QAGBEAAgMAAAAAAAAAAAAAAAAAAAEQITH/2gAIAQMBAT8QQoxH/8QAFxEBAQEBAAAAAAAAAAAAAAAAAAEhMf/aAAgBAgEBPxCmukf/xAAdEAADAAICAwAAAAAAAAAAAAAAAREhMUGRYYGh/9oACAEBAAE/ECZEua56KUO40WAfwaRZJeZsT64S/odWAJ5DpPOhrfIrDtH/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2\"\n        title=\"2\"\n        src=\"/static/892a20a8b9f81babf739e4bba72e1587/a63a1/2.jpg\"\n        srcset=\"/static/892a20a8b9f81babf739e4bba72e1587/4ec73/2.jpg 180w,\n/static/892a20a8b9f81babf739e4bba72e1587/a63a1/2.jpg 234w\"\n        sizes=\"(max-width: 234px) 100vw, 234px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#inline-style%EC%9D%84-%EC%A7%80%EC%96%91%ED%95%98%EC%9E%90\">Inline Style을 지양하자</a></li>\n<li><a href=\"#css-module\">CSS Module</a></li>\n</ul>\n</div>","frontmatter":{"date":"2023.05.30","title":"CSS Module : 인라인(inline)은 나빠요!","categories":"Dev","emoji":"🛼"},"fields":{"slug":"/35-css-module/"}},"prev":{"id":"6c58fad4-81f2-5ffc-803c-3bc78b5ff894","html":"<p><a href=\"https://www.jeong-min.com/36-RAF/\">지난 글</a>에서 <code class=\"language-text\">requestAnimationFrame</code>에 대해 알아보았다. 어떤 독자는 해당 글을 읽으면서 한 궁금증이 떠올랐을지도 모른다.</p>\n<p>‘왜 <code class=\"language-text\">setTimeout</code>은 타이머 주기를 보장하지 않는 거지?’\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 400px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 97.22222222222223%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAATABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAUEAQL/xAAXAQADAQAAAAAAAAAAAAAAAAAAAgQF/9oADAMBAAIQAxAAAAGpzJnFrgaH4NCe+M+j/8QAGxABAAIDAQEAAAAAAAAAAAAAAQIDAAQREDP/2gAIAQEAAQUCUAnF82J8lSjZmz96QlbwM//EABYRAQEBAAAAAAAAAAAAAAAAABARQv/aAAgBAwEBPwGmj//EABkRAAEFAAAAAAAAAAAAAAAAABACEUNRgf/aAAgBAgEBPwFlUI8H/8QAGRABAQADAQAAAAAAAAAAAAAAAQAQESGB/9oACAEBAAY/AtrccBuD3DA3L//EABsQAAMAAwEBAAAAAAAAAAAAAAABESExUUFh/9oACAEBAAE/IcaC6NYlvworFHsotYugtdMPhBZlVErEiP/aAAwDAQACAAMAAAAQF8/A/8QAFxEAAwEAAAAAAAAAAAAAAAAAARARsf/aAAgBAwEBPxCbEdL/xAAYEQEAAwEAAAAAAAAAAAAAAAABEBEhUf/aAAgBAgEBPxC9xV2oA3D/xAAeEAEAAwACAgMAAAAAAAAAAAABABEhMUFRYXGBof/aAAgBAQABPxDNLyx+e533EbuQHt+paIA1ThvJjAVha/Ir8qeIilY6TiNSLinrJcadF1BBA4Dqf//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"0\"\n        title=\"0\"\n        src=\"/static/06ab4f5805de86c054a7bf5913b42278/066f9/0.jpg\"\n        srcset=\"/static/06ab4f5805de86c054a7bf5913b42278/4ec73/0.jpg 180w,\n/static/06ab4f5805de86c054a7bf5913b42278/158ba/0.jpg 360w,\n/static/06ab4f5805de86c054a7bf5913b42278/066f9/0.jpg 400w\"\n        sizes=\"(max-width: 400px) 100vw, 400px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>이를 알기 위해서는 이벤트 루프에 대해 알아야 하는데, 우선 자바스크립트가 어떻게 동작하는지부터 알아보자.</p>\n<p> </p>\n<h2 id=\"자바스크립트의-동작\" style=\"position:relative;\"><a href=\"#%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EC%9D%98-%EB%8F%99%EC%9E%91\" aria-label=\"자바스크립트의 동작 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>자바스크립트의 동작</h2>\n<p>자바스크립트 엔진은 하나의 콜 스택을 가지는 싱글 스레드 모델로 동작한다. 하지만 현실에서 자바스크립트는 웹 브라우저나 노드js와 같은 멀티스레드 환경에 임베디드되어 실행되기 때문에 자바스크립트와 웹api, 이벤트 루프 등을 분리하여 말하기는 어렵다. 따라서 자바스크립트를 작동시킬 때는 싱글 스레드와 멀티 스레드의 타이밍이 따로 존재한다고 말할 수 있다. 일반적으로 프로그램은 코드를 위에서 아래로 순차적으로 실행하지만, 이벤트 루프를 통해 이벤트가 발생할 때마다 해당 이벤트에 대한 작업을 처리할 수 있다. 이를 통해 비동기 작업을 효율적으로 처리할 수 있고, 블로킹되는 작업 없이 다른 작업을 계속 수행할 수 있게 된다.</p>\n<p> </p>\n<h2 id=\"자바스크립트의-이벤트-루프\" style=\"position:relative;\"><a href=\"#%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EC%9D%98-%EC%9D%B4%EB%B2%A4%ED%8A%B8-%EB%A3%A8%ED%94%84\" aria-label=\"자바스크립트의 이벤트 루프 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>자바스크립트의 이벤트 루프</h2>\n<p>즉, 이벤트 루프는 싱글 스레드 환경에서 비동기 작업을 처리하기 위한 메커니즘이다.</p>\n<blockquote>\n<p>스레드는 프로세스 내의 실행 단위이며, 프로세스는 메모리 상에서 실행중인 작업을 말한다.</p>\n</blockquote>\n<p>자바스크립트는 이벤트 기반의 비동기 프로그래밍을 위해 이벤트 루프를 사용한다. 웹 페이지에서 사용자의 클릭, 키보드 입력, 마우스 움직임 등의 이벤트가 발생하면 이를 브라우저의 이벤트 루프가 감지하고 처리한다. 이벤트 루프는 이벤트를 순차적으로 처리하며, 이벤트 핸들러 함수를 호출하여 해당 이벤트에 대한 작업을 수행한다. 이를 통해 웹 페이지는 사용자와의 상호작용에 따라 동적으로 동작할 수 있다.</p>\n<p> </p>\n<h2 id=\"자바스크립트-런타임\" style=\"position:relative;\"><a href=\"#%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-%EB%9F%B0%ED%83%80%EC%9E%84\" aria-label=\"자바스크립트 런타임 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>자바스크립트 런타임</h2>\n<p>자바스크립트 런타임은</p>\n<ul>\n<li>자바스크립트 엔진 (메모리 힙 + 콜 스택)</li>\n<li>웹api</li>\n<li>이벤트 루프</li>\n<li>콜백 큐</li>\n</ul>\n<p>로 구성된다.</p>\n<ul>\n<li>메모리 힙: 메모리 할당이 이루어지는 곳으로 선언한 변수와 함수들이 들어간다.</li>\n<li>콜 스택: 실제 실행되는 코드를 순서대로 실행하는 곳이다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/webp;base64,UklGRpIAAABXRUJQVlA4IIYAAADwAwCdASoUAA8APtFUo0uoJKMhsAgBABoJYwAAW+3l2K3hRCJg5fuIAP7yXGImf0Bm8HlE3us8RwYYeN6Ez4YGvJv5XB1zcUbjju4ifDN4Tv0xAZI7oRVR4XbUTf3o2C9F5typ9vi9mWmbSTiSZmJ9JJZ5UR+xPRYVkTTHzQhJ9F53zcAAAA=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"1\"\n        title=\"1\"\n        src=\"/static/129ea5fd03df416c5bec13017c449194/bc514/1.webp\"\n        srcset=\"/static/129ea5fd03df416c5bec13017c449194/59d6e/1.webp 180w,\n/static/129ea5fd03df416c5bec13017c449194/a3012/1.webp 360w,\n/static/129ea5fd03df416c5bec13017c449194/bc514/1.webp 720w,\n/static/129ea5fd03df416c5bec13017c449194/a9a89/1.webp 1024w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>콜 스택에서 비동기 함수가 실행되면, 브라우저에서 제공하는 웹 api를 호출하게 되고, 웹 api는 콜백함수를 콜백 큐에 추가한다. 그렇게 선입선출로 콜 스택으로 넘어가 실행된다. 이렇게 콜 스택이 비어있을 때 콜백 큐의 첫번째 콜백을 넘겨주도록 콜 스택을 체크해주는 역할을 하는 것이 이벤트 루프다. 만일 스택이 할당된 공간보다 많은 공간을 차지하게 되면 스택오버플로우 에러가 발생한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 525px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 84.44444444444446%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAARABQDASIAAhEBAxEB/8QAGQABAAMBAQAAAAAAAAAAAAAAAAMEBQEG/8QAFQEBAQAAAAAAAAAAAAAAAAAAAQD/2gAMAwEAAhADEAAAAbncaMfSKhIZAdAR/8QAHRAAAQQCAwAAAAAAAAAAAAAAAwABAjEEFBIhIv/aAAgBAQABBQLbHy3BIeREjSdmUe0AfktwuFf/xAAVEQEBAAAAAAAAAAAAAAAAAAARIP/aAAgBAwEBPwEj/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPwEf/8QAHhAAAQMEAwAAAAAAAAAAAAAAAgABIRARIqExMpH/2gAIAQEABj8C5LxdtK4vpM5IcYRWiaDT/8QAGxAAAgIDAQAAAAAAAAAAAAAAAREAITFBcRD/2gAIAQEAAT8hJtDuWNwFs4SsAFZS9LtCEzsNpOKQQ1CSoTD4MnZ//9oADAMBAAIAAwAAABBUHz//xAAXEQEBAQEAAAAAAAAAAAAAAAABABEx/9oACAEDAQE/EEFk9m//xAAYEQADAQEAAAAAAAAAAAAAAAAAAREQQf/aAAgBAgEBPxBOlOZ//8QAIBABAAICAQQDAAAAAAAAAAAAAQARIWExQVFxoYGR8P/aAAgBAQABPxCjBcqoa+pYhkVYnzLM+tQzQ9fMbOi5dPl1KMhDqV3jcJAPPZBxep6TPUJ+TRP/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2\"\n        title=\"2\"\n        src=\"/static/3b3359898d6ac4cf2e969ba35c2601d5/7349d/2.jpg\"\n        srcset=\"/static/3b3359898d6ac4cf2e969ba35c2601d5/4ec73/2.jpg 180w,\n/static/3b3359898d6ac4cf2e969ba35c2601d5/158ba/2.jpg 360w,\n/static/3b3359898d6ac4cf2e969ba35c2601d5/7349d/2.jpg 525w\"\n        sizes=\"(max-width: 525px) 100vw, 525px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<blockquote>\n<p>웹 브라우저에서 자바스크립트를 실행시키는 경우, 엔진 워크단계에서 브라우저 엔진은 렌더링 등의 작업들은 백그라운드에서 멀티 스레드로 처리하고 js코드나 메모리에 영향을 끼치는 작업을 수행할 때에는 싱글 스레드로 처리한다. 모던 브라우저의 구조를 살펴보자면, concurrency를 위한 싱글스레드 부분과 parallelism을 위한 멀티스레드 부분이 있다.</p>\n</blockquote>\n<blockquote>\n<p>concurrency한 부분을 보자면, 체크 큐에서 콜백 큐에 실행시켜야 할 명령어가 있는지 검사하고, 있다면 꺼내서 런 시키고 존재하지 않는다면 다시 엔진워크 단계로 돌아간다. parallel한 부분을 보자면, 웹 api 스레드는 각자 해야할 일을 수행 후 콜백 큐에 콜백 함수를 적재시키는데, 이 콜백 큐에 대한 서브 스레드로 네트워크, 타이머, 메세지, 돔이벤트의 네 가지의 스레드가 존재한다.</p>\n</blockquote>\n<p>자바스크립트는 싱글 스레드 기반으로 동작하는 스크립트 언어지만, 이렇게 비동기적인 처리를 지원하기 때문에 빠르게 동작할 수 있다.</p>\n<p> </p>\n<h2 id=\"settimeout-예시\" style=\"position:relative;\"><a href=\"#settimeout-%EC%98%88%EC%8B%9C\" aria-label=\"settimeout 예시 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>setTimeout 예시</h2>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span>log<span class=\"token punctuation\">,</span> <span class=\"token number\">5000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>의 동작을 살펴보자.</p>\n<ol>\n<li><code class=\"language-text\">console.log(1)</code>이 수행되면 콜 스택에 추가 되고, 실행되어 출력된 후, 콜 스택에서 제거된다.</li>\n<li><code class=\"language-text\">setTimeout</code>이 수행되면 콜 스택에 추가 되고, 실행되어 web API의 timer 스레드에 작업이 넘겨진다.</li>\n</ol>\n<p>즉, 5초 간 기다리는 작업을 timer 스레드라는 서브 스레드에서 수행하는 것이다. 덕분에 메인 스레드에서는 5초 간의 블로킹이 일어나지 않고 다음 코드를 수행할 수 있다. 자바스크립트가 호출 스택이 하나인 싱글 스레드임에도 여러 가지 일을 동시에 처리하는 것처럼 동작할 수 있는 이유이다. 이를 concurrency라고 한다.</p>\n<ol start=\"3\">\n<li>그리고 나서 <code class=\"language-text\">console.log(3)</code>이 적재되고 실행된 후 제거된다.</li>\n<li>5초 후 timer 스레드에서는 콜백 큐로 <code class=\"language-text\">console.log(2)</code>를 옮긴다.</li>\n<li>이벤트 루프가 콜백 큐에 있던 <code class=\"language-text\">console.log(2)</code>를 콜 스택에 추가하고, 실행된 후 제거된다.</li>\n</ol>\n<p>이벤트 루프는 항상 루프를 돌면서 콜 스택과 콜백 큐를 확인한다. 그러다 콜 스택이 빈 상태가 되면, 콜백 큐에 있는 함수를 하나씩 콜 스택으로 올려준다.</p>\n<p> </p>\n<h2 id=\"settimeout은-타이머-시간을-보장하지-않는다\" style=\"position:relative;\"><a href=\"#settimeout%EC%9D%80-%ED%83%80%EC%9D%B4%EB%A8%B8-%EC%8B%9C%EA%B0%84%EC%9D%84-%EB%B3%B4%EC%9E%A5%ED%95%98%EC%A7%80-%EC%95%8A%EB%8A%94%EB%8B%A4\" aria-label=\"settimeout은 타이머 시간을 보장하지 않는다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>setTimeout은 타이머 시간을 보장하지 않는다</h2>\n<p>위의 예시에서 봤듯이, 이벤트 루프는 큐에 들어온 작업을 스택으로 이동시켜 실행하고, <code class=\"language-text\">setTimeout</code> 함수는 정해진 시간이 지나면 해당 콜백 함수를 큐에 추가한다. 그러나 이때 타이머의 정확한 시간은 보장되지 않는다.</p>\n<p><code class=\"language-text\">setTimeout</code> 함수가 정확한 타이머를 보장하지 않는 이유는 여러 가지 요소들이 상호작용하기 때문이다.</p>\n<ol>\n<li><strong>이벤트 루프의 처리 시간</strong><br>\n위에서 설명한 호출 스택에 이미 다른 작업이 존재하거나 이벤트 루프의 다른 처리가 있을 경우, <code class=\"language-text\">setTimeout</code>의 정확한 타이머를 보장할 수 없다.</li>\n<li><strong>시스템 리소스 및 환경 요인</strong><br>\n운영 체제나 실행 환경에 따라 타이머 정확성이 영향을 받을 수 있다. 자바스크립트 엔진은 시스템의 다른 프로세스나 작업과 리소스를 공유하므로, 이에 따라 <code class=\"language-text\">setTimeout</code>의 실행 시간이 다소 차이가 생길 수 있다.</li>\n<li><strong>브라우저의 최소 지연 시간</strong><br>\n대부분의 브라우저는 <code class=\"language-text\">setTimeout</code>의 최소 지연 시간을 가지고 있다. (일반적으로 4ms에서 10ms 사이의 값이 최소 지연 시간으로 사용된다.) 따라서 <code class=\"language-text\">setTimeout</code>의 지연 시간을 0으로 설정하더라도 실제로는 최소 지연 시간 이상의 시간이 지난 후에 콜백 함수가 실행될 수 있다.</li>\n</ol>\n<p>이러한 요소들로 인해 <code class=\"language-text\">setTimeout</code>의 정확한 타이머 보장이 어려울 수 있다. 만약 정확한 타이밍이 필요한 경우에는 <code class=\"language-text\">requestAnimationFrame</code>을 사용하는 것이 더 적합할 수 있다. <code class=\"language-text\">requestAnimationFrame</code>은 브라우저의 리플로우 주기에 맞춰 실행되므로, 애니메이션 및 시각적인 업데이트와 같은 작업에 더 적합하다.</p>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EC%9D%98-%EB%8F%99%EC%9E%91\">자바스크립트의 동작</a></li>\n<li><a href=\"#%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EC%9D%98-%EC%9D%B4%EB%B2%A4%ED%8A%B8-%EB%A3%A8%ED%94%84\">자바스크립트의 이벤트 루프</a></li>\n<li><a href=\"#%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-%EB%9F%B0%ED%83%80%EC%9E%84\">자바스크립트 런타임</a></li>\n<li><a href=\"#settimeout-%EC%98%88%EC%8B%9C\">setTimeout 예시</a></li>\n<li><a href=\"#settimeout%EC%9D%80-%ED%83%80%EC%9D%B4%EB%A8%B8-%EC%8B%9C%EA%B0%84%EC%9D%84-%EB%B3%B4%EC%9E%A5%ED%95%98%EC%A7%80-%EC%95%8A%EB%8A%94%EB%8B%A4\">setTimeout은 타이머 시간을 보장하지 않는다</a></li>\n</ul>\n</div>","frontmatter":{"date":"2023.06.10","title":"이딴 게.. 타이머? 자바스크립트의 런타임과 Event Loop","categories":"Dev","emoji":"⏱"},"fields":{"slug":"/37-event-loop/"}},"site":{"siteMetadata":{"siteUrl":"https://jeong-min.com","comments":{"utterances":{"repo":"danmin20/danmin-gatsby-blog"}}}}},"pageContext":{"slug":"/36-RAF/","nextSlug":"/35-css-module/","prevSlug":"/37-event-loop/"}},"staticQueryHashes":["1321405810","3649515864"]}