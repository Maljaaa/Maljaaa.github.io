{"componentChunkName":"component---src-templates-post-template-index-tsx","path":"/28-vanilla-spa-5/","result":{"data":{"cur":{"id":"33d486c8-9e66-5888-a059-ebcc51e5f1bb","html":"<p>컴포넌트와 라우터가 만들어졌으니, 한번 애플리케이션을 띄워봅시다!</p>\n<p> </p>\n<h3 id=\"srcindexts\" style=\"position:relative;\"><a href=\"#srcindexts\" aria-label=\"srcindexts permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>src/index.ts</h3>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> initRouter<span class=\"token punctuation\">,</span> Route <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./core/BrowserRouter\"</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 또는 HashRouter</span>\n<span class=\"token keyword\">import</span> Main <span class=\"token keyword\">from</span> <span class=\"token string\">\"./pages/Main\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> Component <span class=\"token keyword\">from</span> <span class=\"token string\">\"@/core/Component\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">\"./scss/index.scss\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> Sub <span class=\"token keyword\">from</span> <span class=\"token string\">\"./pages/Sub\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> routes<span class=\"token operator\">:</span> Route<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span> path<span class=\"token operator\">:</span> <span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span> page<span class=\"token operator\">:</span> Main <span class=\"token keyword\">as</span> <span class=\"token keyword\">typeof</span> Component <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> path<span class=\"token operator\">:</span> <span class=\"token string\">\"/sub\"</span><span class=\"token punctuation\">,</span> page<span class=\"token operator\">:</span> Sub <span class=\"token keyword\">as</span> <span class=\"token keyword\">typeof</span> Component <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> $app <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#app\"</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> HTMLElement<span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">initRouter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> $app<span class=\"token punctuation\">,</span> routes <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p> </p>\n<h3 id=\"srcpagesmaints\" style=\"position:relative;\"><a href=\"#srcpagesmaints\" aria-label=\"srcpagesmaints permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>src/pages/Main.ts</h3>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> Header <span class=\"token keyword\">from</span> <span class=\"token string\">\"@/components/Header\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> Component<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> PropsType<span class=\"token punctuation\">,</span> StateType <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@/core/Component\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Main</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component<span class=\"token operator\">&lt;</span>PropsType<span class=\"token punctuation\">,</span> StateType<span class=\"token operator\">></span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">didMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">void</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> $header <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"header\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">new</span> <span class=\"token class-name\">Header</span><span class=\"token punctuation\">(</span>$header <span class=\"token keyword\">as</span> Element<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> propTest<span class=\"token operator\">:</span> <span class=\"token string\">\"mainprop\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">template</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n      &lt;div class='main-page'>\n        &lt;header>&lt;/header>\n        MainPage\n      &lt;/div>\n    </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p> </p>\n<h3 id=\"srcpagessubts\" style=\"position:relative;\"><a href=\"#srcpagessubts\" aria-label=\"srcpagessubts permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>src/pages/Sub.ts</h3>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> Header <span class=\"token keyword\">from</span> <span class=\"token string\">\"@/components/Header\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> Component<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> PropsType<span class=\"token punctuation\">,</span> StateType <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@/core/Component\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Sub</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component<span class=\"token operator\">&lt;</span>PropsType<span class=\"token punctuation\">,</span> StateType<span class=\"token operator\">></span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">didMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">void</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> $header <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"header\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">new</span> <span class=\"token class-name\">Header</span><span class=\"token punctuation\">(</span>$header <span class=\"token keyword\">as</span> Element<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> propTest<span class=\"token operator\">:</span> <span class=\"token string\">\"subprop\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">template</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n      &lt;div class='main-page'>\n        &lt;header>&lt;/header>\n        SubPage\n      &lt;/div>\n    </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p> </p>\n<h3 id=\"srccomponentsheaderts\" style=\"position:relative;\"><a href=\"#srccomponentsheaderts\" aria-label=\"srccomponentsheaderts permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>src/components/Header.ts</h3>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> Component <span class=\"token keyword\">from</span> <span class=\"token string\">\"@/core/Component\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> router <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@/core/BrowserRouter\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">HeaderProps</span> <span class=\"token punctuation\">{</span>\n  propTest<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">HeaderState</span> <span class=\"token punctuation\">{</span>\n  stateTest<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Header</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component<span class=\"token operator\">&lt;</span>HeaderProps<span class=\"token punctuation\">,</span> HeaderState<span class=\"token operator\">></span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">setup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      stateTest<span class=\"token operator\">:</span> <span class=\"token string\">\"state\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">didMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> propTest <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> HeaderProps <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> stateTest<span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>stateTest <span class=\"token operator\">+</span> propTest <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">template</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> stateTest <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n    &lt;div class='header'>\n      </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>stateTest<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\n      &lt;div id='main'>MainPage&lt;/div>\n      &lt;div id='sub'>SubPage&lt;/div>\n    &lt;/div>\n    </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">setEvent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">addEvent</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"click\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"#main\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      router<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">addEvent</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"click\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"#sub\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      router<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/sub\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>state와 props가 잘 동작하는지도 확인해보기 위한 코드도 함께 넣어주었습니다. 한 번 실행시켜 볼까요?</p>\n<table>\n<thead>\n<tr>\n<th>1. BrowserRouter의 경우</th>\n<th></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAACkUlEQVQ4y6WQS0wTURSGZ+nCjWGh0IWR8nIssNDU58bYgLrQ6MKyYOPOjUlj2Bh3CIKAC00RaGMhEhIXNEFaIGBS24pFHuFNaQdogTBOo3EhldLXPb+ZYQokPiLxJF/Of+8997/nXM5aXXXY2VJ/6q25lh/qsvAueyc/9MbGO1+38X2dbXx/l5UfaH/B97XU8b3NT3i5rsdcyzte1vHO1qe8o62B77c2FT1/eP/QoLWR43z2rrtpvxvfw162KW3gqyRi89sXUGIblIiBJeOISyEkhTFgbWYXFp4CC00Cq1OILX6Cs918FdF1jmttNptWAn4Ii/Op2dk58niHyeVyk/fDME1OTSuM+HwUXJgjYdFPC7PTND0xRh+9HhoZHKSwx8X8Xjcaah4bAXBctkZj0hYUQptfkNLm5VGuVksnVHLVtTY/ny4bDFR27TpdKSuns+cv0Gm9ns7o9WQwGFhZeTmyNRrjuYuXOK7abDa5gkG4AoGUKxgkRf8GtyDAvbSk8F4QMpBnZZm98/tRVVNj/CF3+MrhMEkAJCAlAaTqXSIqsv6sIu2tKQKwVQDPOjp2Rm7p7jaFGEOIsVSIMVK1wnIyiaVEQmElncb+M4V0msJELBCLoc5i2TFstdtN8gtholSYiFSNNQAL0SgGZmYwND+P3vFxLKdSyJyrmdYAJsTjqLda/2y4/1IGuSN5L8NfDZUixpJhxuQR9tj5AvplXyXEmPx/LLi9jXqL5Y5iaO3pebABYANgaj4Qotx9Oo1Gm61CMWy02e5NRCIYFcXomCjGDsKoKG6NS9KWb3099qip6aZieDQn5zhfWnq7UKerKNTpjGr+V4xFxcUVJ0tKbhzJyjp2q7KSU0Jx/o/I3JfzTwQDHZ3egC1eAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"0\"\n        title=\"0\"\n        src=\"/static/c3f907a1158bebb1f1dc482e76c5969f/37523/0.png\"\n        srcset=\"/static/c3f907a1158bebb1f1dc482e76c5969f/e9ff0/0.png 180w,\n/static/c3f907a1158bebb1f1dc482e76c5969f/f21e7/0.png 360w,\n/static/c3f907a1158bebb1f1dc482e76c5969f/37523/0.png 720w,\n/static/c3f907a1158bebb1f1dc482e76c5969f/302a4/0.png 1080w,\n/static/c3f907a1158bebb1f1dc482e76c5969f/07a9c/0.png 1440w,\n/static/c3f907a1158bebb1f1dc482e76c5969f/c0566/0.png 1544w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></td>\n<td><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAACiUlEQVQ4y6WQP0xTURjF3+jgYhhEGIhtBXwWiAQSjCZGMCoRNTpYBhY3F5PGsBg3BAHBQVPS0sZCUBIHmqAtiDUppWLlj1LFUtqH9lFCfUTjIEhpKfc75pVnrUSNxJv8cs797nfP/cNZGup3OowtBx4Zmnhnr5l32e7zzodW3tHTyTt6TPzgAwv/pOsuP2Bs5h933OTlvn5DE283NvN2Uytv72zlByzthXeuXdnx1NLGcV5b76WNgBtfRQ9blhbxWYpi+csnUGINSMTA1uOIS2EkhAkg8jYNiT6w8BQg+hCbHYOjy3AKKwscZ+ow6D8EAxBm/cnp6Xc04hkl17CbPJ5R8nrH6PWUj8a8L0kI+EmYDVBg+g35JsfpxcgIeYeGSPQMs8BzN2413tAB4Lg9ubl6dX4B1Pvyk2qNhlRqNe3NQKXRUJ5KRRWHj1B1zRmqOnGSjlZWUvXpGjpWdZxKD5aysvJyZOfk6soqDnFcg8Ggd4VCcAWDSVcoRCn/G4YFAe65ua2Q+/0cc874Ud/YqPsm3/Ce3a6XAEhAUgJI8WmWFGT/USHD0xLAIgBud3dvPtnY16cPM4YwY8kwY6T4TTY2IMTjEBIJ/FL/uU4iEQvGYmg2mzcDTTabfh6ASJQUiUjxkFUOfDYzg0GfD06/P13PUIoATD60xWL5c2Dmpogyl2+UWf9roNwkMrYuMiY/4Rfkb0jXt6yHGWPzAAutraHFbL6YCrT0919dBLAIMEW3RVT5mjartTYV2Ga1Xn61tITxaHRlIhqNbYfxaHR1UpJWvQsLsevt7edSgbtzcvL4kpILBVptbYFWq1P0X9EVFhXV7i8uPrsrKyv7fF0dlxqp5P8YP/bL+h3lTx2y7rgvygAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"1\"\n        title=\"1\"\n        src=\"/static/cac11106d63a122289a9cfe06b3dc4e4/37523/1.png\"\n        srcset=\"/static/cac11106d63a122289a9cfe06b3dc4e4/e9ff0/1.png 180w,\n/static/cac11106d63a122289a9cfe06b3dc4e4/f21e7/1.png 360w,\n/static/cac11106d63a122289a9cfe06b3dc4e4/37523/1.png 720w,\n/static/cac11106d63a122289a9cfe06b3dc4e4/302a4/1.png 1080w,\n/static/cac11106d63a122289a9cfe06b3dc4e4/07a9c/1.png 1440w,\n/static/cac11106d63a122289a9cfe06b3dc4e4/c0566/1.png 1544w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></td>\n</tr>\n</tbody>\n</table>\n<table>\n<thead>\n<tr>\n<th>2. HashRouter의 경우</th>\n<th></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAAClklEQVQ4y6WQO0yTURTHv9HBxTAodDBSK/hZYNDU52JsQB00OlgGFjcXk8awGDcEQcBBLY+2sRAJiQNNKuURMKltxSKPAOVRaAstEOrXaBykUvq652++r1+BhGgk3uSX87/n3vO/5x7OXFN92N7WcMb2upYf7jbxDmsXP/zOwve9NfL9XUZ+oNvMD3a84vvb6vnelmf8e0MdbzPU8fbWer6v/TlvNzbyA+bm4pePHx4aMjdxnMfafT/jc+Jn2M02hQ18FyLY/PENlNwGJeNgqQQSQgipwDiw5t2BhafBQlPA6jTii1/Q12G4jtg6xxlbW/TBxXn45rzp2dk5crlHyOFwkvvTCE1Nz0iMejzkX5ijwKKPFmZnaGZynD67XTQ6NERhl4P53E401j7VAeC4fIVCrzxVhEKVKq1UnaRCpZJOyBSezO6VKhVd1Wqp/MZNulZeQecvXqKzGg2d02hIq9Wy8ooK5CsUuguXr3BcjcGgd/j9cPiX0g6/n7J6P85AAM5gUOJjIJCDXCvL7IPPh+raWt0vscM3drteACAAaQEgWe8QlRH1Vxlhd09RgK0CeNHZmf1yW0+PPsQYQoylQ4yRrCWWUykEk0mJlUwGe88kMhkKE7GleBz1JlPWsN1q1YsvhInSYSKSNdYALMRiGPR6MTw/j96JCSyn08idy5HWABZIJNBgNv/ZcG9RDrEjMZfjr4bSJcZSYcbEL+ySHQHty8uEGBPnx/zb22gwme5Jhmab7dEGgA2AyfFARMTuMxk0WSyVkmGTxfJgMhrFWCQSG49E4gdhLBLZmhCELc/6evxJc/NtyfBoQcFxvqzsbpFaXVmkVuvk+K/oiktKKk+Xlt46kpd37E5VFSctyfk/Vq5ejL8BwTMdjLxn+3YAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2\"\n        title=\"2\"\n        src=\"/static/45b92975819163e049c0648b422695e2/37523/2.png\"\n        srcset=\"/static/45b92975819163e049c0648b422695e2/e9ff0/2.png 180w,\n/static/45b92975819163e049c0648b422695e2/f21e7/2.png 360w,\n/static/45b92975819163e049c0648b422695e2/37523/2.png 720w,\n/static/45b92975819163e049c0648b422695e2/302a4/2.png 1080w,\n/static/45b92975819163e049c0648b422695e2/07a9c/2.png 1440w,\n/static/45b92975819163e049c0648b422695e2/c0566/2.png 1544w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></td>\n<td><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAACiUlEQVQ4y6WQT0iTYRzH32OHLuEh04O0LbW3qSQKRkGkUUlW1KF58NKtSzDCS3QzTU07FJPNjaZYQgcH1mbZgjmn+b9Wts3ttfY6cW0UHdKcm/P5feOdb2tKRdIDH77f5/f8nu/zhzM11O+26VsOPdE18fZeI++wPOTtj828raeTt/UY+IFHJv55131+QN/MP+24zUt9/bom3qpv5q2GVt7a2coPmNoL7924tuuFqY3jxiy9VzZ8TnwTXWw5soQvkTCWv34GJdaARAxsPY54JIiEMAWE3qUh0Q0WfAOIbsTmJmDr0p3ByiLHGTp02o9+H4Q5T3J29j0Nu0bJMeQkl2uUXCOjND3zmibGx0nwekiY85Fv9i25pyfp1fAwjQ0OkugaYr4RJ+403tIA4Lh9ublaZX4BlAfyk0qVihRKJe3PQKFSUZ5CQRVHj1F1zTmqOnWajldWUvXZGjpRdZJKD5eysvJyZOfkasoqjnBcg06ndQQCcPj9SUcgQCn/G4YEAc75+e2Q88M8s3s9qG9s1HyXbvjAatVGAESAZAQg2aeJykj+k0yGpyjAQgDudndvPlnf16cNMoYgY8kgYyT7TTY2IMTjEBIJbKn/WieRiPljMTQbjZuBBotFuwBAJEqKRCR7SCoFvvR68cztht3jSdczlEIAkw5tMZn+HJi5KSTPpRtl1v8aKDWJjK2LjElP2IL0Den6tvUgY2wBYIG1NbQYjZdTgab+/utLAJYAJuuOCMtf02Y216YC28zmqzPRKCbD4ZWpcDi2EybD4dXpSGR1bHExdrO9/UIqcG9OTh5fUnKpQK2uLVCrNbL+K5rCoqLag8XF5/dkZWVfrKvjUiOV/B/j535JfwCikB2gJRaSTgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"3\"\n        title=\"3\"\n        src=\"/static/4d5126d23a0bbcdeaf21afdb9629369f/37523/3.png\"\n        srcset=\"/static/4d5126d23a0bbcdeaf21afdb9629369f/e9ff0/3.png 180w,\n/static/4d5126d23a0bbcdeaf21afdb9629369f/f21e7/3.png 360w,\n/static/4d5126d23a0bbcdeaf21afdb9629369f/37523/3.png 720w,\n/static/4d5126d23a0bbcdeaf21afdb9629369f/302a4/3.png 1080w,\n/static/4d5126d23a0bbcdeaf21afdb9629369f/07a9c/3.png 1440w,\n/static/4d5126d23a0bbcdeaf21afdb9629369f/c0566/3.png 1544w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></td>\n</tr>\n</tbody>\n</table>\n<p>HashRouter의 경우 BrowserRouter와 다르게 <code class=\"language-text\">#</code>이 들어가있는 것을 볼 수 있습니다. 두 경우 모두 state와 props가 잘 보여지고 있네요!</p>\n<p>지금은 <code class=\"language-text\">template()</code> 메서드로 string을 반환하여 UI를 그리고 있는데요, 때문에 클릭같은 이벤트도 <code class=\"language-text\">setEvent()</code> 메서드 내부에서 등록해주고 있는 것을 볼 수 있습니다.</p>\n<p>다음 글에서는 jsx를 구현하여 더욱 효율적으로 엘리먼트를 그릴 수 있도록 해봅시다.</p>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#srcindexts\">src/index.ts</a></li>\n<li><a href=\"#srcpagesmaints\">src/pages/Main.ts</a></li>\n<li><a href=\"#srcpagessubts\">src/pages/Sub.ts</a></li>\n<li><a href=\"#srccomponentsheaderts\">src/components/Header.ts</a></li>\n</ul>\n</div>","excerpt":"컴포넌트와 라우터가 만들어졌으니, 한번 애플리케이션을 띄워봅시다!   src/index.ts   src/pages/Main.ts   src/pages/Sub.ts   src/components/Header.ts state와 props가 잘 동작하는지도 확인해보기 위한 코드도 함께 넣어주었습니다. 한 번 실행시켜 볼까요? 1. BrowserRouter의 경우    2. HashRouter의 경우    HashRouter의 경우 BrowserRouter와 다르게 이 들어가있는 것을 볼 수 있습니다. 두 경우 모두 state와 props가 잘 보여지고 있네요! 지금은  메서드로 string을 반환하여 UI를 그리고 있는데요, 때문에 클릭같은 이벤트도  메서드 내부에서 등록해주고 있는 것을 볼 수 있습니다. 다음 글에서는 jsx를 구현하여 더욱 효율적으로 엘리먼트를 그릴 수 있도록 해봅시다. src/index.ts src/pages/Main.ts src/pages/Sub.ts src/co…","frontmatter":{"date":"2022.05.17","title":"바닐라JS(TS)로 리액트 SPA 구현하기 | (5) 간단한 웹 구현해보기","categories":"Dev React만들어보기","emoji":"🍦"},"fields":{"slug":"/28-vanilla-spa-5/"}},"next":{"id":"298baa9e-5793-52a3-bbef-07648aa5c161","html":"<p>이번 글에서는 BrowserRouter를 구현해보도록 하겠습니다.</p>\n<p> </p>\n<h2 id=\"1-route-타입-정의\" style=\"position:relative;\"><a href=\"#1-route-%ED%83%80%EC%9E%85-%EC%A0%95%EC%9D%98\" aria-label=\"1 route 타입 정의 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Route 타입 정의</h2>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\">Route</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  path<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  page<span class=\"token operator\">:</span> <span class=\"token keyword\">typeof</span> Component<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이는 HashRouter와 동일합니다.</p>\n<p> </p>\n<h2 id=\"2-router-구조\" style=\"position:relative;\"><a href=\"#2-router-%EA%B5%AC%EC%A1%B0\" aria-label=\"2 router 구조 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Router 구조</h2>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Router</span> <span class=\"token punctuation\">{</span>\n  $app<span class=\"token operator\">:</span> HTMLElement<span class=\"token punctuation\">;</span>\n  routes<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">[</span>key<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> <span class=\"token keyword\">typeof</span> Component<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  fallback<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"/\"</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>          <span class=\"token comment\">// 생성자</span>\n\n  <span class=\"token function\">initEvent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>            <span class=\"token comment\">// hash가 변경되었을 때의 이벤트 init</span>\n  \n  <span class=\"token function\">onRouteChangeHandler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> <span class=\"token comment\">// hash가 변경되었을 때의 이벤트 핸들러</span>\n\n  <span class=\"token function\">hasRoute</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>             <span class=\"token comment\">// 올바른 라우트인지 검증</span>\n\n  <span class=\"token function\">getRoute</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>             <span class=\"token comment\">// 해당 라우트 가져오기</span>\n\n  <span class=\"token function\">renderPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>           <span class=\"token comment\">// 페이지 렌더링</span>\n\n  <span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>                 <span class=\"token comment\">// 라우터 push</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>라우터 구조 또한 HashRouter의 경우와 똑같이 잡아주도록 하겠습니다. 다만 이번에는 <code class=\"language-text\">onHashChangeHandler</code>가 아닌 <code class=\"language-text\">onRouterChangeHandler</code>로 네이밍해주었습니다.</p>\n<p> </p>\n<h2 id=\"3-class-초기화\" style=\"position:relative;\"><a href=\"#3-class-%EC%B4%88%EA%B8%B0%ED%99%94\" aria-label=\"3 class 초기화 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. Class 초기화</h2>\n<p>당연히 생상자 내부 코드도 동일하겠죠?</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  $app<span class=\"token punctuation\">,</span>\n  routes<span class=\"token punctuation\">,</span>\n  fallback <span class=\"token operator\">=</span> <span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  $app<span class=\"token operator\">:</span> HTMLElement<span class=\"token punctuation\">;</span>\n  routes<span class=\"token operator\">:</span> Route<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  fallback<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$app <span class=\"token operator\">=</span> $app<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>fallback <span class=\"token operator\">=</span> fallback<span class=\"token punctuation\">;</span>\n\n  routes<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>route<span class=\"token operator\">:</span> Route<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>routes<span class=\"token punctuation\">[</span>route<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> route<span class=\"token punctuation\">.</span>page<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">initEvent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>최상단 엘리먼트 객체, fallback url, 라우트들을 초기화해주고, <code class=\"language-text\">initEvent</code>를 실행합니다.</p>\n<p> </p>\n<h2 id=\"4-hash가-변경될-때의-이벤트-처리\" style=\"position:relative;\"><a href=\"#4-hash%EA%B0%80-%EB%B3%80%EA%B2%BD%EB%90%A0-%EB%95%8C%EC%9D%98-%EC%9D%B4%EB%B2%A4%ED%8A%B8-%EC%B2%98%EB%A6%AC\" aria-label=\"4 hash가 변경될 때의 이벤트 처리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. hash가 변경될 때의 이벤트 처리</h2>\n<p>이제부터 HashRouter와 다른 로직이 등장하게 됩니다. HashRouter의 경우 Hash가 변경될 때 이벤트 처리를 해주었지만, BrowserRouter의 경우 history API를 사용합니다.</p>\n<p><code class=\"language-text\">initEvent</code>에서 window 객체의 이벤트 리스너에 핸들러를 등록해줍시다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token function\">initEvent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  document<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span>\n    <span class=\"token string\">\"moveRoutes\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">moveRoutesHandler</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> EventListener\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">moveRoutesHandler</span><span class=\"token punctuation\">(</span>event<span class=\"token operator\">:</span> CustomEvent<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> path<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span>detail<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">;</span>\n  history<span class=\"token punctuation\">.</span><span class=\"token function\">pushState</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>detail<span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">renderPage</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>여기서 의문이 들 수 있습니다. document 객체의 이벤트 리스너에 <code class=\"language-text\">moveRoutes</code>라는 이벤트가 있었나? 싶을 텐데요. 맞습니다. document 객체에서는 history의 변경사항을 알아챌 수 없습니다.</p>\n<p>따라서 직접 커스텀 이벤트를 작성해주어야 합니다.</p>\n<p> </p>\n<h2 id=\"5-customeventemitter\" style=\"position:relative;\"><a href=\"#5-customeventemitter\" aria-label=\"5 customeventemitter permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. customEventEmitter</h2>\n<p><code class=\"language-text\">/src/utils/helpers.ts</code></p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">customEventEmitter</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>eventType<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> detail<span class=\"token operator\">?</span><span class=\"token operator\">:</span> object<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  document<span class=\"token punctuation\">.</span><span class=\"token function\">dispatchEvent</span><span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">new</span> <span class=\"token class-name\">CustomEvent</span><span class=\"token punctuation\">(</span>eventType<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      detail<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">CustomEvent</code>를 dispatch할 수 있는 헬퍼 함수를 만들어 줍시다.</p>\n<p> </p>\n<h2 id=\"6-해당하는-페이지-렌더링\" style=\"position:relative;\"><a href=\"#6-%ED%95%B4%EB%8B%B9%ED%95%98%EB%8A%94-%ED%8E%98%EC%9D%B4%EC%A7%80-%EB%A0%8C%EB%8D%94%EB%A7%81\" aria-label=\"6 해당하는 페이지 렌더링 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6. 해당하는 페이지 렌더링</h2>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token function\">hasRoute</span><span class=\"token punctuation\">(</span>path<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">typeof</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>routes<span class=\"token punctuation\">[</span>path<span class=\"token punctuation\">]</span> <span class=\"token operator\">!==</span> <span class=\"token string\">\"undefined\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">getRoute</span><span class=\"token punctuation\">(</span>path<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>routes<span class=\"token punctuation\">[</span>path<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">renderPage</span><span class=\"token punctuation\">(</span>path<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> route<span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">/* 동적 라우팅 처리 */</span>\n  <span class=\"token keyword\">const</span> regex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\w{1,}$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 동적 라우팅으로 전달되는 :id 는 모두 [문자열 + 숫자] 조합으로 간주</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">hasRoute</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    route <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getRoute</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>regex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 주소가 없는 경우를 동적 라우팅으로 간주하고 이를 :id 로 치환</span>\n    route <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getRoute</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>regex<span class=\"token punctuation\">,</span> <span class=\"token string\">\":id\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 그 외 입력되지 않은 모든 주소에 대해서는 fallback 실행</span>\n    route <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getRoute</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>fallback<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">new</span> <span class=\"token class-name\">route</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$app<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">push</span><span class=\"token punctuation\">(</span>path<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">customEventEmitter</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"moveRoutes\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token operator\">...</span>history<span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">,</span>\n    path<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>다른 로직은 HashRouter와 모두 동일하지만, 라우트를 push할 경우에는 더 이상 window의 hash 값을 바꾸는 게 아닌, <code class=\"language-text\">customEventEmitter</code>를 사용하여 새로운 페이지가 렌더링 될 수 있도록 해야 합니다.</p>\n<p> </p>\n<h2 id=\"7-라우터-export\" style=\"position:relative;\"><a href=\"#7-%EB%9D%BC%EC%9A%B0%ED%84%B0-export\" aria-label=\"7 라우터 export permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>7. 라우터 export</h2>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">let</span> router<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function-variable function\">push</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>path<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">initRouter</span><span class=\"token punctuation\">(</span>options<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  $app<span class=\"token operator\">:</span> HTMLElement<span class=\"token punctuation\">;</span>\n  routes<span class=\"token operator\">:</span> Route<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">void</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> routerObj <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Router</span><span class=\"token punctuation\">(</span>options<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  router <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">push</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> routerObj<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">customEventEmitter</span><span class=\"token punctuation\">(</span>\n    <span class=\"token string\">\"moveRoutes\"</span><span class=\"token punctuation\">,</span>\n    history<span class=\"token punctuation\">.</span>state <span class=\"token operator\">??</span> <span class=\"token punctuation\">{</span>\n      path<span class=\"token operator\">:</span> <span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">initRouter</code>에서도 단순히 <code class=\"language-text\">onRouterChangeHandler</code>를 호출하는 게 아닌, <code class=\"language-text\">customEventEmitter</code>를 호출하여 루트 페이지가 렌더링 될 수 있도록 해야 합니다.</p>\n<h2 id=\"전체-코드\" style=\"position:relative;\"><a href=\"#%EC%A0%84%EC%B2%B4-%EC%BD%94%EB%93%9C\" aria-label=\"전체 코드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>전체 코드</h2>\n<p><code class=\"language-text\">/src/core/BrowserRouter.ts</code></p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> Component <span class=\"token keyword\">from</span> <span class=\"token string\">\"@/core/Component\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> customEventEmitter <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@/utils/helpers\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\">Route</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  path<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  page<span class=\"token operator\">:</span> <span class=\"token keyword\">typeof</span> Component<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Router</span> <span class=\"token punctuation\">{</span>\n  $app<span class=\"token operator\">:</span> HTMLElement<span class=\"token punctuation\">;</span>\n  routes<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">[</span>key<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> <span class=\"token keyword\">typeof</span> Component<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  fallback<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"/\"</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    $app<span class=\"token punctuation\">,</span>\n    routes<span class=\"token punctuation\">,</span>\n    fallback <span class=\"token operator\">=</span> <span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    $app<span class=\"token operator\">:</span> HTMLElement<span class=\"token punctuation\">;</span>\n    routes<span class=\"token operator\">:</span> Route<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    fallback<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$app <span class=\"token operator\">=</span> $app<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>fallback <span class=\"token operator\">=</span> fallback<span class=\"token punctuation\">;</span>\n\n    routes<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>route<span class=\"token operator\">:</span> Route<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>routes<span class=\"token punctuation\">[</span>route<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> route<span class=\"token punctuation\">.</span>page<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">initEvent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">initEvent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    document<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">\"moveRoutes\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">onRouteChangeHandler</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> EventListener\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">onRouteChangeHandler</span><span class=\"token punctuation\">(</span>event<span class=\"token operator\">:</span> CustomEvent<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> path<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span>detail<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">;</span>\n    history<span class=\"token punctuation\">.</span><span class=\"token function\">pushState</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>detail<span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">renderPage</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">hasRoute</span><span class=\"token punctuation\">(</span>path<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">typeof</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>routes<span class=\"token punctuation\">[</span>path<span class=\"token punctuation\">]</span> <span class=\"token operator\">!==</span> <span class=\"token string\">\"undefined\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">getRoute</span><span class=\"token punctuation\">(</span>path<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>routes<span class=\"token punctuation\">[</span>path<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">renderPage</span><span class=\"token punctuation\">(</span>path<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> route<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">/* 동적 라우팅 처리 */</span>\n    <span class=\"token keyword\">const</span> regex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\w{1,}$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 동적 라우팅으로 전달되는 :id 는 모두 [문자열 + 숫자] 조합으로 간주</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">hasRoute</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      route <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getRoute</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>regex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 주소가 없는 경우를 동적 라우팅으로 간주하고 이를 :id 로 치환</span>\n      route <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getRoute</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>regex<span class=\"token punctuation\">,</span> <span class=\"token string\">\":id\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 그 외 입력되지 않은 모든 주소에 대해서는 fallback 실행</span>\n      route <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getRoute</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>fallback<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">new</span> <span class=\"token class-name\">route</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$app<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">push</span><span class=\"token punctuation\">(</span>path<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">customEventEmitter</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"moveRoutes\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token operator\">...</span>history<span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">,</span>\n      path<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">let</span> router<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function-variable function\">push</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>path<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">initRouter</span><span class=\"token punctuation\">(</span>options<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  $app<span class=\"token operator\">:</span> HTMLElement<span class=\"token punctuation\">;</span>\n  routes<span class=\"token operator\">:</span> Route<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">void</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> routerObj <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Router</span><span class=\"token punctuation\">(</span>options<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  router <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">push</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> routerObj<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">customEventEmitter</span><span class=\"token punctuation\">(</span>\n    <span class=\"token string\">\"moveRoutes\"</span><span class=\"token punctuation\">,</span>\n    history<span class=\"token punctuation\">.</span>state <span class=\"token operator\">??</span> <span class=\"token punctuation\">{</span>\n      path<span class=\"token operator\">:</span> <span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#1-route-%ED%83%80%EC%9E%85-%EC%A0%95%EC%9D%98\">1. Route 타입 정의</a></li>\n<li><a href=\"#2-router-%EA%B5%AC%EC%A1%B0\">2. Router 구조</a></li>\n<li><a href=\"#3-class-%EC%B4%88%EA%B8%B0%ED%99%94\">3. Class 초기화</a></li>\n<li><a href=\"#4-hash%EA%B0%80-%EB%B3%80%EA%B2%BD%EB%90%A0-%EB%95%8C%EC%9D%98-%EC%9D%B4%EB%B2%A4%ED%8A%B8-%EC%B2%98%EB%A6%AC\">4. hash가 변경될 때의 이벤트 처리</a></li>\n<li><a href=\"#5-customeventemitter\">5. customEventEmitter</a></li>\n<li><a href=\"#6-%ED%95%B4%EB%8B%B9%ED%95%98%EB%8A%94-%ED%8E%98%EC%9D%B4%EC%A7%80-%EB%A0%8C%EB%8D%94%EB%A7%81\">6. 해당하는 페이지 렌더링</a></li>\n<li><a href=\"#7-%EB%9D%BC%EC%9A%B0%ED%84%B0-export\">7. 라우터 export</a></li>\n<li><a href=\"#%EC%A0%84%EC%B2%B4-%EC%BD%94%EB%93%9C\">전체 코드</a></li>\n</ul>\n</div>","frontmatter":{"date":"2022.05.16","title":"바닐라JS(TS)로 리액트 SPA 구현하기 | (4) 클래스로 BrowserRouter 구현","categories":"Dev React만들어보기","emoji":"🍦"},"fields":{"slug":"/27-vanilla-spa-4/"}},"prev":{"id":"dc2411b2-cec3-5024-839e-a3371757b032","html":"<h3 id=\"jsx란\" style=\"position:relative;\"><a href=\"#jsx%EB%9E%80\" aria-label=\"jsx란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JSX란?</h3>\n<p>React는 별도의 파일에 마크업과 로직을 넣어 기술을 인위적으로 분리하는 대신, 마크업과 로직을 모두 포함하는 “컴포넌트”라고 부르는 느슨하게 연결된 유닛으로 관심사를 분리합니다. JSX도 결국엔 표현식입니다. 컴파일이 끝나면, JSX는 JavaScript 객체로 인식됩니다.</p>\n<p>이전 글에서, 우리는 마크업과 해당 엘리먼트 내의 로직을 따로 분리하여 코드를 작성했었습니다. JSX를 구현하여 이를 함께 포함할 수 있도록 해봅시다!</p>\n<p>JSX를 구현한 후, 우리는 컴포넌트 내 렌더함수에서 다음과 같은 형태로 컴포넌트를 작성하게 될 것입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token comment\">// Main.ts</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> jsx<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n      &lt;div class='main-page'>\n        </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$header<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\n        &lt;div onClick=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'MainPage'</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">>MainPage&lt;/div>\n      &lt;/div>\n    </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  \n<span class=\"token comment\">// Sub.ts</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> jsx<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n      &lt;div class='main-page'>\n        </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$header<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\n        &lt;div onClick=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'SubPage'</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">>SubPage&lt;/div>\n      &lt;/div>\n    </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  \n<span class=\"token comment\">// Header.ts</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> jsx<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n      &lt;div class='header'>\n        &lt;div onClick=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>propFuncTest<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">>propFuncTest&lt;/div>\n        </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>stateTest<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>propTest<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\n        &lt;div onClick=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> router<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">>MainPage&lt;/div>\n        &lt;div onClick=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> router<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/sub'</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">>SubPage&lt;/div>\n      &lt;/div>\n    </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>위의 구조가 동작될 수 있게끔 JSX를 구현해보도록 하겠습니다.<br>\n(Header의 props로는 스트링 타입의 <code class=\"language-text\">propTest</code>와 함수 타입의 <code class=\"language-text\">propFuncTest</code>를 전달해주도록 하겠습니다.)</p>\n<p> </p>\n<h2 id=\"1-jsx-함수-기본-구조\" style=\"position:relative;\"><a href=\"#1-jsx-%ED%95%A8%EC%88%98-%EA%B8%B0%EB%B3%B8-%EA%B5%AC%EC%A1%B0\" aria-label=\"1 jsx 함수 기본 구조 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. jsx 함수 기본 구조</h2>\n<p>우선 jsx 함수는 스트링 배열과 ${}에 포함된 아규먼트를 받아서, 공정을 거쳐 최종적으로 엘리먼트를 반환하게 됩니다. 초기 template은 div 엘리먼트로 두도록 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> jsx <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>strings<span class=\"token operator\">:</span> TemplateStringsArray<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Element <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>strings<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">&amp;&amp;</span> args<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Failed To Parse'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">let</span> template <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'div'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token operator\">...</span>\n  \n  <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>HTMLElement<span class=\"token operator\">></span>template<span class=\"token punctuation\">.</span>firstElementChild <span class=\"token operator\">??</span> template<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>위 jsx 코드 예시에서, Main/Sub의 중간에 Header가 들어가기 때문에<br>\n<code class=\"language-text\">Main/Sub의 jsx 호출 -> Header의 jsx 호출 -> Header의 jsx 처리 완료 -> Main/Sub의 jsx 처리 완료</code><br>\n의 순으로 동작하게 됩니다.</p>\n<p>각각의 strings(왼쪽 이미지)와 args(오른쪽 이미지)를 확인해보면 다음과 같습니다.</p>\n<table>\n<thead>\n<tr>\n<th>Main</th>\n<th></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 638px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 17.77777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAzklEQVQY0z2P6W6DQAyEeY9GXR/LlRDKFWCBJND2/V9pqjVSf4xGGo+tzwm1HfR2B7OHYw/dnpB+gFwrFPuBdFlQzCvy49dyfxwmaVroOIE0hSM1UVYg4eEByku4Dwd3IVB+ha4bpOsh4wR9vyEhwP98W8ZVDa4bkKTg8gaKIE7NoxJZFmhYwJF0mm3Bv152NBLIMELqxsT3L0jTgcvKes4JyGegrPynTKTt4dcNWXjC7zs0BMRMusHcyheC+2Qj0zlA+sc5k/Qkk/PtSPgHyAp3jP2RD+QAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"0\"\n        title=\"0\"\n        src=\"/static/ff589df2940dc4944bfe14d0a0021e90/41be6/0.png\"\n        srcset=\"/static/ff589df2940dc4944bfe14d0a0021e90/e9ff0/0.png 180w,\n/static/ff589df2940dc4944bfe14d0a0021e90/f21e7/0.png 360w,\n/static/ff589df2940dc4944bfe14d0a0021e90/41be6/0.png 638w\"\n        sizes=\"(max-width: 638px) 100vw, 638px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></td>\n<td><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 450px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 16.11111111111111%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAuklEQVQI1zWM23KCMABE+Y5qK8VRYwEFQUIgIQHFS+1t+v//cjpkpg87u2dnZ4OtiMntjaRQiMqyKg0iLVH9A2nvHM2FMFozfw6ZzRfen2YvXhP/56lfhEsCIWLSSiOSjH0hqbsBqQzanjFupJ24bkl3ObXSVLKhH0ZUY9DG0dmBpu385jVaEWzEG/GhZpNkZPsDUjYcK8VwGnHuhDYW15/J8pLH5w+ttl6X67s/u90/+Pr+pSgl0XLNHyUTYDkzQxUbAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"1\"\n        title=\"1\"\n        src=\"/static/4b645e4bb5ff41f20fc4ee9bc531083f/fc2a6/1.png\"\n        srcset=\"/static/4b645e4bb5ff41f20fc4ee9bc531083f/e9ff0/1.png 180w,\n/static/4b645e4bb5ff41f20fc4ee9bc531083f/f21e7/1.png 360w,\n/static/4b645e4bb5ff41f20fc4ee9bc531083f/fc2a6/1.png 450w\"\n        sizes=\"(max-width: 450px) 100vw, 450px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></td>\n</tr>\n</tbody>\n</table>\n<table>\n<thead>\n<tr>\n<th>Sub</th>\n<th></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 15.555555555555555%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAn0lEQVQI1y2OXQ6CMBAGuYhh2W0LJMafFhUExZgY73+iMbQ+zNPuN5mqjxPhlGhiQtRT14qmAb3ecKdIWF/YcMGmO3YbsccDt65oTDT7Q/6vxZDQIRaouuOV9hhp0lCOO0HUYfcZ3UTzjM1LkaQB8V3BAuJapHGZTbpR9eeR9nBGn0/854P/fnONe7+xZckleRT6UrkxTkWqHvFtKfyLf5KzWfQfqXpEAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2\"\n        title=\"2\"\n        src=\"/static/a4c9d7c4e68e4772f385e25deec6be3c/a6d36/2.png\"\n        srcset=\"/static/a4c9d7c4e68e4772f385e25deec6be3c/e9ff0/2.png 180w,\n/static/a4c9d7c4e68e4772f385e25deec6be3c/f21e7/2.png 360w,\n/static/a4c9d7c4e68e4772f385e25deec6be3c/a6d36/2.png 650w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></td>\n<td><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 438px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 15.555555555555555%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAt0lEQVQI1zWOWY6CQAAFuca4QcTI1oA4IA3aCDgsKnGM979LGTvx66Xqo/IMIWKSdiJMC5xU4akRf5cjmzvH7olsJkxrw2JpMZuvmC9MVuaan9lS83c/zrRsjEDEBL8lfrRHhDGqaihKRVW3nOsL/XCjPFZkh4L20munzi3jdeLx/2IY73TDjTST2BsHw3ED3CTHEzv8ICKTJ9KDRKleh7+xMEqomz/Nrid0OC9OdP1Vn/i4tb3lDbEzYE0uiqf+AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"3\"\n        title=\"3\"\n        src=\"/static/672c16a74fc756bfbf74bfb600c47e6a/50e4b/3.png\"\n        srcset=\"/static/672c16a74fc756bfbf74bfb600c47e6a/e9ff0/3.png 180w,\n/static/672c16a74fc756bfbf74bfb600c47e6a/f21e7/3.png 360w,\n/static/672c16a74fc756bfbf74bfb600c47e6a/50e4b/3.png 438w\"\n        sizes=\"(max-width: 438px) 100vw, 438px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></td>\n</tr>\n</tbody>\n</table>\n<table>\n<thead>\n<tr>\n<th>Header</th>\n<th></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 26.666666666666668%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA40lEQVQY01VQW3KDMAzkIi2yZYMxhIKTEKA8ZvKT9v4H2o5EM00/diyv16uVsqobYNsP8LqCxwk8f4KXFTzPcNsGexlgmhbkS5j6BHIFcmIQFzAhgsoKFCJMqEHskcXzBCtCH1SkYl9qrdwLn78b5Lk9IPUb/d0FxMiq/gbb9bB9OrqVUdPxbTwSD/Ke1ECSSAMTG5iqVpBx/5DVaQL3Cf7xgP/+grvf4bYdvCw6vo6YW5i2g9t32OsAm856ygp0olfDoulBRQCnC9x1hDm1ujMRS5LnBzFUPkRtIJym/jV66n4A6kaSo731KQEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"4\"\n        title=\"4\"\n        src=\"/static/53464b0ba41fe779de37c20b7a50897b/37523/4.png\"\n        srcset=\"/static/53464b0ba41fe779de37c20b7a50897b/e9ff0/4.png 180w,\n/static/53464b0ba41fe779de37c20b7a50897b/f21e7/4.png 360w,\n/static/53464b0ba41fe779de37c20b7a50897b/37523/4.png 720w,\n/static/53464b0ba41fe779de37c20b7a50897b/3c051/4.png 760w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></td>\n<td><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 460px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 36.11111111111111%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABW0lEQVQoz22R2Y6CQBBF+Q+VXRuhkR0BWRtwd8yYzP9/yp10GR8mmYdKqms5XXVLCeMc8fiA50fI0gLH6YRpmDCKGdf7E9fbF9pOoKwaPJ4vDGKGGI+43Z+Ikxzfrx/0w4Tq0KIoayiGtYGXNdj6IViag1UH+GKEXzfgfgjX9eG4PpjjIYozsC2Hs+WUs2yGIEywYS7stUM1iqqZ8PIWzNtBjxPYwwBLCOhBBNVcQ9s4kDWqbmGlGtB0i94ff7nS6f2JKzLBix7M4TCqCsY8QW9bmF0H83KGuguwWqhUvFhqZNLXDftfUzwewq8EXB4gilLUTY+mF6SHmE6kl9QwzUt0/UgxqVmWl8j2FQxzTVP+BZYDHSXNCmpq2uENHI8EkEAJ+HwgDyP1jNM9DnUHjwcEk2srfBe9gTxEkuQEkxMUVUON03ymmARKf5xOtIUEjvMZl+uDDiMnlcBf83LeX/jLuDkAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"5\"\n        title=\"5\"\n        src=\"/static/b660843686b3cf7aad3a9c8e59e0e2fd/08a84/5.png\"\n        srcset=\"/static/b660843686b3cf7aad3a9c8e59e0e2fd/e9ff0/5.png 180w,\n/static/b660843686b3cf7aad3a9c8e59e0e2fd/f21e7/5.png 360w,\n/static/b660843686b3cf7aad3a9c8e59e0e2fd/08a84/5.png 460w\"\n        sizes=\"(max-width: 460px) 100vw, 460px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></td>\n</tr>\n</tbody>\n</table>\n<p>arg는 자식 컴포넌트, 이벤트 함수, state/props 등이 될 수 있겠죠.</p>\n<p> </p>\n<h2 id=\"2-templateinnerhtml\" style=\"position:relative;\"><a href=\"#2-templateinnerhtml\" aria-label=\"2 templateinnerhtml permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. template.innerHTML</h2>\n<p>아규먼트가 들어올 때 string 배열이 나뉘어지기 때문에, 나중에 해당 아규먼트를 알맞게 할당해줄 수 있도록 표시를 하기 위한 프리픽스를 넣어주어 template에 값을 할당해줍시다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> <span class=\"token constant\">DIRTY_PREFIX</span> <span class=\"token operator\">=</span> <span class=\"token string\">'dirtyindex:'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> jsx <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>strings<span class=\"token operator\">:</span> TemplateStringsArray<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Element <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n  template<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> strings\n    <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">,</span> index<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> argsString <span class=\"token operator\">=</span> args<span class=\"token punctuation\">.</span>length <span class=\"token operator\">></span> index <span class=\"token operator\">?</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">DIRTY_PREFIX</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>index<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">:</span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>str<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>argsString<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<table>\n<thead>\n<tr>\n<th>Main</th>\n<th>Header</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 702px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 21.666666666666668%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAu0lEQVQY002PWw6CMBBF2YgtBcRo5FlqeRTQIiSy//1cMzU1fJy0mWlP7g2yvIbSPbphRm+e0N2I6bVithvMZLFsO+z7AzMvqJsWUrV4tAZJegXjEUKRgIfxn4CGJyYQxamTkpAEJLTrjqJsUEmNomogorN7S9BnL6PTE/gL4wK6n1w6pQcMo3WJm0eHslYunZkWt8sLiXFe3J6SUwjinlU/IecR0ssNUnXISwnGhKvjKxGU7ljNQ/Nj7S8mvHrY5W/vwgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"6\"\n        title=\"6\"\n        src=\"/static/eaee92e99105d6b3917bffc829a420f1/d6331/6.png\"\n        srcset=\"/static/eaee92e99105d6b3917bffc829a420f1/e9ff0/6.png 180w,\n/static/eaee92e99105d6b3917bffc829a420f1/f21e7/6.png 360w,\n/static/eaee92e99105d6b3917bffc829a420f1/d6331/6.png 702w\"\n        sizes=\"(max-width: 702px) 100vw, 702px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></td>\n<td><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 33.888888888888886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABJUlEQVQoz11R7XKCQAz0Qap8gyBwx3GAiCJQ1LbM9E/f/1m2kzBg7Y/c5TbJZpPb1M0Vix1PLdr+Nls3YrxPKI9nCKmh8orjcZrhbWvCMB3sDHs1w7BhWi42dLh+iObSQ5cnnNsB9bnDcPtC9/5gTGQFUqmRCIU4ySBVyZjIZox8wqkJE1LHompY2TB+oh8/mPQ63Bmbvn8wPiYoXTGJ0sfVJ/VRLOAH0ZOQHOqQiBypzFkNJS83jUsqqFCysgJ5Uc+EmYbrhdjurOfIO8NCeEhxSCR3pAKpirVYlzWyvOL9EUa7pN1yjiphOz6LYkJyCKBOpNJxA7jenm/bDeB4e3h+yBjlcdwP4QURx8iWKf8QBkhFjiCM5x8znRebMfvl/T9vIf0Fv5nV3VB0mloAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"7\"\n        title=\"7\"\n        src=\"/static/ee78b245d98e0b8c4d1fa4d369a06bb3/37523/7.png\"\n        srcset=\"/static/ee78b245d98e0b8c4d1fa4d369a06bb3/e9ff0/7.png 180w,\n/static/ee78b245d98e0b8c4d1fa4d369a06bb3/f21e7/7.png 360w,\n/static/ee78b245d98e0b8c4d1fa4d369a06bb3/37523/7.png 720w,\n/static/ee78b245d98e0b8c4d1fa4d369a06bb3/41d3b/7.png 774w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></td>\n</tr>\n</tbody>\n</table>\n<p> </p>\n<h2 id=\"3-프리픽스-처리\" style=\"position:relative;\"><a href=\"#3-%ED%94%84%EB%A6%AC%ED%94%BD%EC%8A%A4-%EC%B2%98%EB%A6%AC\" aria-label=\"3 프리픽스 처리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 프리픽스 처리</h2>\n<p>그 다음 대체된 프리픽스를 원래대로 되돌려야 겠죠? document 객체 내 이터레이터를 사용하여 모든 node를 돌면서 확인하는 코드를 작성해줍시다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> jsx <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>strings<span class=\"token operator\">:</span> TemplateStringsArray<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Element <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n  <span class=\"token keyword\">let</span> walker <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createNodeIterator</span><span class=\"token punctuation\">(</span>template<span class=\"token punctuation\">,</span> NodeFilter<span class=\"token punctuation\">.</span><span class=\"token constant\">SHOW_ALL</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> node<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>node <span class=\"token operator\">=</span> walker<span class=\"token punctuation\">.</span><span class=\"token function\">nextNode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>node에 들어오게 될 대상은 크게 다음 세 가지로 볼 수 있습니다.</p>\n<ol>\n<li>순수 텍스트로 이루어진 attribute</li>\n<li>내부에 attribute가 없는 노드</li>\n<li>내부에 attribute가 있는 노드</li>\n</ol>\n<p>1과 2의 경우 <code class=\"language-text\">handleNoAttribute</code> 함수에서 처리해줍시다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> jsx <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>strings<span class=\"token operator\">:</span> TemplateStringsArray<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Element <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>node <span class=\"token operator\">=</span> walker<span class=\"token punctuation\">.</span><span class=\"token function\">nextNode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>\n      node<span class=\"token punctuation\">.</span>nodeType <span class=\"token operator\">===</span> Node<span class=\"token punctuation\">.</span><span class=\"token constant\">TEXT_NODE</span> <span class=\"token operator\">&amp;&amp;</span>\n      node<span class=\"token punctuation\">.</span>nodeValue<span class=\"token operator\">?.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span><span class=\"token constant\">DIRTY_PREFIX</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">handleNoAttribute</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">continue</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span>\n  \n<span class=\"token keyword\">function</span> <span class=\"token function\">handleNoAttribute</span><span class=\"token punctuation\">(</span>node<span class=\"token operator\">:</span> Node<span class=\"token punctuation\">,</span> args<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>\n    node<span class=\"token punctuation\">.</span>nodeType <span class=\"token operator\">!==</span> Node<span class=\"token punctuation\">.</span><span class=\"token constant\">TEXT_NODE</span> <span class=\"token operator\">||</span>\n    <span class=\"token operator\">!</span>node<span class=\"token punctuation\">.</span>nodeValue<span class=\"token operator\">?.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span><span class=\"token constant\">DIRTY_PREFIX</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> texts <span class=\"token operator\">=</span> node<span class=\"token punctuation\">.</span>nodeValue<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token constant\">DIRTY_SEPARATOR_REGEX_G</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> doms <span class=\"token operator\">=</span> texts<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>text <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> dirtyIndex <span class=\"token operator\">=</span> <span class=\"token constant\">DIRTY_REGEX</span><span class=\"token punctuation\">.</span><span class=\"token function\">exec</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">)</span><span class=\"token operator\">?.</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>dirtyIndex<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token function\">buildDocumentFragmentWith</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> arg <span class=\"token operator\">=</span> args<span class=\"token punctuation\">[</span><span class=\"token function\">Number</span><span class=\"token punctuation\">(</span>dirtyIndex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>arg <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Node</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> arg<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token function\">buildDocumentFragmentWith</span><span class=\"token punctuation\">(</span>arg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> dom <span class=\"token keyword\">of</span> doms<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    node<span class=\"token punctuation\">.</span>parentNode<span class=\"token operator\">?.</span><span class=\"token function\">insertBefore</span><span class=\"token punctuation\">(</span>dom<span class=\"token punctuation\">,</span> node<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  node<span class=\"token punctuation\">.</span>nodeValue <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">handleNoAttribute</code>에 들어온 노드의 nodeValue를 프리픽스를 기준으로 쪼갠 texts를 확인해보면 다음과 같습니다.</p>\n<table>\n<thead>\n<tr>\n<th>Header</th>\n<th>Main</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 272px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.77777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAACHElEQVQ4y2WTa2/aMBSG8ycmrQPs+NhxAoVwSwMUxq0dSNACpVe2qdKkTfuyP7Bf/062kxS6D9aJbOec877PsSekBuMEpUKoRhN+EIKXfXBfwheqiMfL7kU1kK5CvLvjDX/9xXx3ADEfNBxBr1bQ2w1E3ALnBJ+C04QUgDOCGo8hGjE4EyeFvDD5jGbSB5lOP5bh6wiyP3A/lhh4xQevCPAyd+sTAy/xtzMm3DLFTYdROsZ5K4HgBDkcIVgsQEkKanWgJhNQuwPqJpCDS1soWC5sFPXY3qdOF7LXByUXtoBXv9pitr6DUhqMFMLHe+jdBsGXawTLJcLnR+jNLfTDHuHTA6q/fyL6foCaTqHmc3tHWO8jJ1lWYwgZ2pZNVWp34SttfTISDSTrTy4tl8nJJuDmzHznkjubV8zWeyghITJJxkdLzviYEzRwjtc78gWUoJmi1mhDUABWYmAfztzYWBBZPIFScVCKjsVph/HVFu3LKXzmQ47H0Lst1GQKedGzgGS/b4FYzyYT6Ludg9Vs2WjAyMEAlPYclHhxj9kqg1IRdgaD2xuo2cwl2O8Q3KztvkkW/XhF+PIEORpBXTtwolYv7PFIn4PbYRWgTmIPrdQcitROWulNMjsrg5ptR9bsGTiZ11769Q+W99+ghILoJm5UDs92DnOS/70UM7NpzxXPvCugUFhHWG0UUAxhO1fHhI/eaxHN+GTJjt/yP61jgq55Lic+AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"8\"\n        title=\"8\"\n        src=\"/static/48c575eb8ee36a2c1fd94c09e63b26dc/2aae8/8.png\"\n        srcset=\"/static/48c575eb8ee36a2c1fd94c09e63b26dc/e9ff0/8.png 180w,\n/static/48c575eb8ee36a2c1fd94c09e63b26dc/2aae8/8.png 272w\"\n        sizes=\"(max-width: 272px) 100vw, 272px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></td>\n<td><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 270px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABWklEQVQoz2VS2U7CQBTtZyiWzj5dkL0sCqlCW2NaEBWXqPHN+BN+/DGdUbDyMMlk5t57tuuEk0voqAPiMYjpGfhgCCp9UKFBqABl8uBUtXw0BotOQTy+f6cCzvzzC9fbVwgmwLp9qKsc/sszeLdvi7mqD+QShAjwYQwWtkAIN4N+wR2mQnChLQLhhhkLIjOsYkKa1DY1GYhL7TkhIA3P/nnMgkqryGmnG0yTFJwKiOTCsJNZBpkk0DdryDSFXCygigK6LBC8v0GvSmOP//QIfbsxdzGZGgAnmuUYzxfgQsE7dk2zXC6tn/EIqiwgs9QMVlkGfX8HtSrBB7EFynNQ5Vt1lWR/eA4Vtm0osxl4bwCqAmtBJanypybXg3fkmlCoH4I0mvVQ4ocPZOstBJeg7e4uFNbp7VDroSjTWAGzoLULYx+KDCCqNanSc4k1WAUHK/O/0bD+Afxb+w2Na+1zF62LjAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"9\"\n        title=\"9\"\n        src=\"/static/ad02f9517a11d37d1f8d0526da6ab6e6/01bf6/9.png\"\n        srcset=\"/static/ad02f9517a11d37d1f8d0526da6ab6e6/e9ff0/9.png 180w,\n/static/ad02f9517a11d37d1f8d0526da6ab6e6/01bf6/9.png 270w\"\n        sizes=\"(max-width: 270px) 100vw, 270px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></td>\n</tr>\n</tbody>\n</table>\n<p>Header의 경우 state와 prop으로 구성된 순수 텍스트로 이루어진 어트리뷰트가, Main의 경우 자식 컴포넌트인 헤더가 <code class=\"language-text\">handleNoAttribute</code>에 들어온 것을 볼 수 있습니다.</p>\n<p>texts를 돌면서 각각의 프리픽트 인덱스에 맞는 arg를 찾아 노드 타입일 경우에는 arg를 그대로 반환하고, 순수 텍스트일 경우에는 텍스트 노드를 생성해 반환해줍시다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">function</span> <span class=\"token function\">buildDocumentFragmentWith</span><span class=\"token punctuation\">(</span>str<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> df <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createDocumentFragment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>str<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> df<span class=\"token punctuation\">;</span>\n  df<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">createTextNode</span><span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> df<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>그러고 난 후, 반환된 노드들(doms)을 돌면서 <code class=\"language-text\">insertBefore</code> 메서드로 노드를 삽입해줍시다. <code class=\"language-text\">insertBefore</code> 메서드로는 참조된 노드 앞에 특정 부모 노드의 자식 노드를 삽입합니다. 만약 주어진 자식 노드가 document에 존재하는 노드를 참조한다면, 자식 노드를 현재 위치에서 새로운 위치로 옮깁니다. (노드가 이미 부모를 가지고 있다면, 노드가 제거된 후 새로운 위치에 삽입됩니다.)</p>\n<p>마지막으로 기존의 프리픽스 값을 제거해줍시다.</p>\n<p> </p>\n<h2 id=\"4-attribute-치환\" style=\"position:relative;\"><a href=\"#4-attribute-%EC%B9%98%ED%99%98\" aria-label=\"4 attribute 치환 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. attribute 치환</h2>\n<p>이제 거의 모든 노드들이 정상적으로 돌아왔습니다! 하지만 프리픽스로 남아있는 것이 있습니다. 바로 이벤트 함수와 같은 attribute들이죠.</p>\n<p>이제 node가 모두 엘리먼트가 되었기 때문에, 타입을 강제해주고 나머지 로직을 작성해주었습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> jsx <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>strings<span class=\"token operator\">:</span> TemplateStringsArray<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Element <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>node <span class=\"token operator\">=</span> walker<span class=\"token punctuation\">.</span><span class=\"token function\">nextNode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token operator\">...</span>\n\n    node <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>Element<span class=\"token operator\">></span>node<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">let</span> attributes<span class=\"token operator\">:</span> Attr<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>attributes <span class=\"token operator\">??</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> <span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">,</span> value <span class=\"token punctuation\">}</span> <span class=\"token keyword\">of</span> attributes<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>name <span class=\"token operator\">&amp;&amp;</span> value<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span><span class=\"token constant\">DIRTY_PREFIX</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> match <span class=\"token operator\">=</span> <span class=\"token constant\">DIRTY_REGEX</span><span class=\"token punctuation\">.</span><span class=\"token function\">exec</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>match<span class=\"token punctuation\">)</span> <span class=\"token keyword\">continue</span><span class=\"token punctuation\">;</span>\n        value <span class=\"token operator\">=</span> args<span class=\"token punctuation\">[</span><span class=\"token function\">Number</span><span class=\"token punctuation\">(</span>match<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token function\">replaceAttribute</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">,</span> node<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> template<span class=\"token punctuation\">.</span>firstElementChild <span class=\"token operator\">??</span> template<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">replaceAttribute</span><span class=\"token punctuation\">(</span>name<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> value<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span> element<span class=\"token operator\">:</span> Element<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> value <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    element<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">'on'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toLowerCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    element<span class=\"token punctuation\">.</span><span class=\"token function\">removeAttribute</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'This attribute is not a function'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>attribute를 확인해보면 다음과 같습니다.</p>\n<table>\n<thead>\n<tr>\n<th>Header</th>\n<th>Main</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 302px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.222222222222214%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB2klEQVQozz1SaXeiUAzlh4isj722PTqOK4IsgoCFqm3tMnPmzPz/v3DnJFg/hDzeTV6SeyMJ20OcFijrFu3pgrLu4PojlE2H5/M7jq+f+Pj9D/vmGZ4/wnCoQdMFVM28maIaNy/phsVBQ0WDYdowDAuKovMdYRonGVDU/k5VDchDlc+yrF4LmIxTvGTZHqqnI/KiwXqTYJuWyIoGedlAWB5Ob19YRymyXY1tViJOCuybDt35HXV74pyiekLTnblLfnAVbjFfbnD/MMZkOsdsEWIyXcB2fCzDGOPJDMHdI8Io5TjCl+uY8yhu/GOG6WzVd0gfelRYLnNnuwEsx4Pr3TFXwegRwnYxehhzAYoj7wX3fCaa6N9xA+i6oA59HuvQvfBoeXlAdTjyWLYT4PL1l0WLkh2a7oVFa49veP34g/PlF9JdzXlF1XIDkmFaTDSRagobpnDAd5rZi6IL7oKEoI7IelV7ZfUrzp5GpgCqEm1zLFYRV9vEGXdEWNOemTcSgzgj7pJ8z2uUFTVmyxCLdYQwzq4qOz4DcbJjggncbHNOJj5J7W+RSGnCKJa2It1VXODnfMVeNy1INNJgoGAgq7ddo/HIvjHaUTLGFQ0DWbnmKJCvOyzz3gr8B0EVP7oEDh1EAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"10\"\n        title=\"10\"\n        src=\"/static/fcfb12d5e943517e13f2fd54f48da63b/5f1d2/10.png\"\n        srcset=\"/static/fcfb12d5e943517e13f2fd54f48da63b/e9ff0/10.png 180w,\n/static/fcfb12d5e943517e13f2fd54f48da63b/5f1d2/10.png 302w\"\n        sizes=\"(max-width: 302px) 100vw, 302px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></td>\n<td><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 300px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.22222222222222%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAABB0lEQVQY01WQ626CQBCFeREVBRd2WcBro7FRKxYUineNMTZN//T93+Br2DZN/XFyTubMTOaM5bge0/mS5+mC11XJMiuQQWR0lm+ZJxmzRcrT6Jl8c2Bd7snLA8JT1BstGrbzAKstJL3BiP5wzEuSmcWerxlPZiRpzngyNV5/OCJdl5S7M9l6Q8sR1OpN7L9lLeymi+W4Al9qPF8ZVkGEVKHhWt1GR11T12GHqtfzA3Nd3B0Qxj3jBTo2ukprtYXieLmzP99M3Apv2xPb4xWlY07Xd1bFjiQtKDZHyv3FePfPLy63D/OWKk3V47YlllKaBwQVQuSv/uEQIXw63T5h1EHK4GFG/uNvb9uiHyaJgLUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"11\"\n        title=\"11\"\n        src=\"/static/184b8d70d0f799cfee9d9616a2ff1946/5a46d/11.png\"\n        srcset=\"/static/184b8d70d0f799cfee9d9616a2ff1946/e9ff0/11.png 180w,\n/static/184b8d70d0f799cfee9d9616a2ff1946/5a46d/11.png 300w\"\n        sizes=\"(max-width: 300px) 100vw, 300px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></td>\n</tr>\n</tbody>\n</table>\n<p>이 중에서 프리픽스로 대체된 것들을 args에서 찾아 바꿔 넣어줍시다. 이 때, 함수일 경우 제대로 이벤트 등록을 하기 위해 추가적으로 <code class=\"language-text\">replaceAttribute</code>를 거치도록 해주었습니다.</p>\n<p> </p>\n<h2 id=\"5-완성\" style=\"position:relative;\"><a href=\"#5-%EC%99%84%EC%84%B1\" aria-label=\"5 완성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. 완성!!</h2>\n<p>아래는 전체 코드입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> <span class=\"token constant\">DIRTY_PREFIX</span> <span class=\"token operator\">=</span> <span class=\"token string\">'dirtyindex:'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">DIRTY_REGEX</span> <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">dirtyindex:(\\d+):</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">DIRTY_SEPARATOR_REGEX_G</span> <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">(dirtyindex:\\d+:)</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">replaceAttribute</span><span class=\"token punctuation\">(</span>name<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> value<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span> element<span class=\"token operator\">:</span> Element<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> value <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    element<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">'on'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toLowerCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    element<span class=\"token punctuation\">.</span><span class=\"token function\">removeAttribute</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'This attribute is not a function'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">buildDocumentFragmentWith</span><span class=\"token punctuation\">(</span>str<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> df <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createDocumentFragment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>str<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> df<span class=\"token punctuation\">;</span>\n  df<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">createTextNode</span><span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> df<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">handleNoAttribute</span><span class=\"token punctuation\">(</span>node<span class=\"token operator\">:</span> Node<span class=\"token punctuation\">,</span> args<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>\n    node<span class=\"token punctuation\">.</span>nodeType <span class=\"token operator\">!==</span> Node<span class=\"token punctuation\">.</span><span class=\"token constant\">TEXT_NODE</span> <span class=\"token operator\">||</span>\n    <span class=\"token operator\">!</span>node<span class=\"token punctuation\">.</span>nodeValue<span class=\"token operator\">?.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span><span class=\"token constant\">DIRTY_PREFIX</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> texts <span class=\"token operator\">=</span> node<span class=\"token punctuation\">.</span>nodeValue<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token constant\">DIRTY_SEPARATOR_REGEX_G</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> doms <span class=\"token operator\">=</span> texts<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>text <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> dirtyIndex <span class=\"token operator\">=</span> <span class=\"token constant\">DIRTY_REGEX</span><span class=\"token punctuation\">.</span><span class=\"token function\">exec</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">)</span><span class=\"token operator\">?.</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>dirtyIndex<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token function\">buildDocumentFragmentWith</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> arg <span class=\"token operator\">=</span> args<span class=\"token punctuation\">[</span><span class=\"token function\">Number</span><span class=\"token punctuation\">(</span>dirtyIndex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>arg <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Node</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> arg<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token function\">buildDocumentFragmentWith</span><span class=\"token punctuation\">(</span>arg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> dom <span class=\"token keyword\">of</span> doms<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    node<span class=\"token punctuation\">.</span>parentNode<span class=\"token operator\">?.</span><span class=\"token function\">insertBefore</span><span class=\"token punctuation\">(</span>dom<span class=\"token punctuation\">,</span> node<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  node<span class=\"token punctuation\">.</span>nodeValue <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> jsx <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>strings<span class=\"token operator\">:</span> TemplateStringsArray<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Element <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>strings<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">&amp;&amp;</span> args<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Failed To Parse'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">let</span> template <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'div'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  template<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> strings\n    <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">,</span> index<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> argsString <span class=\"token operator\">=</span> args<span class=\"token punctuation\">.</span>length <span class=\"token operator\">></span> index <span class=\"token operator\">?</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">DIRTY_PREFIX</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>index<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">:</span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>str<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>argsString<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">let</span> walker <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createNodeIterator</span><span class=\"token punctuation\">(</span>template<span class=\"token punctuation\">,</span> NodeFilter<span class=\"token punctuation\">.</span><span class=\"token constant\">SHOW_ALL</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> node<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>node <span class=\"token operator\">=</span> walker<span class=\"token punctuation\">.</span><span class=\"token function\">nextNode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>\n      node<span class=\"token punctuation\">.</span>nodeType <span class=\"token operator\">===</span> Node<span class=\"token punctuation\">.</span><span class=\"token constant\">TEXT_NODE</span> <span class=\"token operator\">&amp;&amp;</span>\n      node<span class=\"token punctuation\">.</span>nodeValue<span class=\"token operator\">?.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span><span class=\"token constant\">DIRTY_PREFIX</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">handleNoAttribute</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">continue</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    node <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>Element<span class=\"token operator\">></span>node<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">let</span> attributes<span class=\"token operator\">:</span> Attr<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>attributes <span class=\"token operator\">??</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> <span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">,</span> value <span class=\"token punctuation\">}</span> <span class=\"token keyword\">of</span> attributes<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>name <span class=\"token operator\">&amp;&amp;</span> value<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span><span class=\"token constant\">DIRTY_PREFIX</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> match <span class=\"token operator\">=</span> <span class=\"token constant\">DIRTY_REGEX</span><span class=\"token punctuation\">.</span><span class=\"token function\">exec</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>match<span class=\"token punctuation\">)</span> <span class=\"token keyword\">continue</span><span class=\"token punctuation\">;</span>\n        value <span class=\"token operator\">=</span> args<span class=\"token punctuation\">[</span><span class=\"token function\">Number</span><span class=\"token punctuation\">(</span>match<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token function\">replaceAttribute</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">,</span> node<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> template<span class=\"token punctuation\">.</span>firstElementChild <span class=\"token operator\">??</span> template<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> jsx<span class=\"token punctuation\">;</span></code></pre></div>\n<p>실제로 엘리먼트에는 많은 속성들이 있고, 지금 구현된 코드로는 작동하지 않을 속성들도 있을 것입니다. 그래도 기본적인 기능은 돌아가는 코드를 작성했기 때문에, 필요에 따라 로직을 추가해 사용하신다면 좋을 것 같습니다!</p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<ul>\n<li><a href=\"#jsx%EB%9E%80\">JSX란?</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#1-jsx-%ED%95%A8%EC%88%98-%EA%B8%B0%EB%B3%B8-%EA%B5%AC%EC%A1%B0\">1. jsx 함수 기본 구조</a></p>\n</li>\n<li>\n<p><a href=\"#2-templateinnerhtml\">2. template.innerHTML</a></p>\n</li>\n<li>\n<p><a href=\"#3-%ED%94%84%EB%A6%AC%ED%94%BD%EC%8A%A4-%EC%B2%98%EB%A6%AC\">3. 프리픽스 처리</a></p>\n</li>\n<li>\n<p><a href=\"#4-attribute-%EC%B9%98%ED%99%98\">4. attribute 치환</a></p>\n</li>\n<li>\n<p><a href=\"#5-%EC%99%84%EC%84%B1\">5. 완성!!</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"2022.05.18","title":"바닐라JS(TS)로 리액트 SPA 구현하기 | (6) JSX 구현해보기","categories":"Dev React만들어보기","emoji":"🍦"},"fields":{"slug":"/29-vanilla-spa-6/"}},"site":{"siteMetadata":{"siteUrl":"https://jeong-min.com","comments":{"utterances":{"repo":"danmin20/danmin-gatsby-blog"}}}}},"pageContext":{"slug":"/28-vanilla-spa-5/","nextSlug":"/27-vanilla-spa-4/","prevSlug":"/29-vanilla-spa-6/"}},"staticQueryHashes":["1321405810","3649515864"]}